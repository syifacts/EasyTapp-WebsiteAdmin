(()=>{var e,t,n,s,r={45:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(825));t.default=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const a=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e))).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new r.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},206:()=>{},261:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(660));class i extends r.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}={}){const i=r?`${r}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const r=void 0===s?"offset":`${s}.offset`,i=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=i},279:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=s(n(961));t.PostgrestClient=r.default;const i=s(n(45));t.PostgrestQueryBuilder=i.default;const a=s(n(825));t.PostgrestFilterBuilder=a.default;const o=s(n(261));t.PostgrestTransformBuilder=o.default;const l=s(n(660));t.PostgrestBuilder=l.default;const c=s(n(818));t.PostgrestError=c.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},452:e=>{var t=function(e){"use strict";var t,n=Object.prototype,s=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,s){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(s||[]);return r(a,"_invoke",{value:I(e,n,o)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",m="executing",p="completed",g={};function y(){}function v(){}function w(){}var b={};c(b,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k($([])));_&&_!==n&&s.call(_,a)&&(b=_);var S=w.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(r,i,a,o){var l=h(e[r],e,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&s.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,o)}),(function(e){n("throw",e,a,o)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,o)}))}o(l.arg)}var i;r(this,"_invoke",{value:function(e,s){function r(){return new t((function(t,r){n(e,s,t,r)}))}return i=i?i.then(r,r):r()}})}function I(e,n,s){var r=d;return function(i,a){if(r===m)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return{value:t,done:!0}}for(s.method=i,s.arg=a;;){var o=s.delegate;if(o){var l=O(o,s);if(l){if(l===g)continue;return l}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(r===d)throw r=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);r=m;var c=h(e,n,s);if("normal"===c.type){if(r=s.done?p:f,c.arg===g)continue;return{value:c.arg,done:s.done}}"throw"===c.type&&(r=p,s.method="throw",s.arg=c.arg)}}}function O(e,n){var s=n.method,r=e.iterator[s];if(r===t)return n.delegate=null,"throw"===s&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==s&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+s+"' method")),g;var i=h(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function $(e){if(null!=e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(s.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return v.prototype=w,r(S,"constructor",{value:w,configurable:!0}),r(w,"constructor",{value:v,configurable:!0}),v.displayName=c(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},T(E.prototype),c(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,s,r,i){void 0===i&&(i=Promise);var a=new E(u(t,n,s,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var s in t)n.push(s);return n.reverse(),function e(){for(;n.length;){var s=n.pop();if(s in t)return e.value=s,e.done=!1,e}return e.done=!0,e}},e.values=$,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(s,r){return o.type="throw",o.arg=e,n.next=s,r&&(n.method="next",n.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=s.call(a,"catchLoc"),c=s.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var s=n.completion;if("throw"===s.type){var r=s.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,s){return this.delegate={iterator:$(e),resultName:n,nextLoc:s},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const s=n(519);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${s.version}`}},660:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(907)),i=s(n(818));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,n,s;let r=null,a=null,o=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(a="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),i=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&i&&i.length>1&&(o=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(r={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,o=null,l=406,c="Not Acceptable"):a=1===a.length?a[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(a=[],r=null,l=200,c="OK")}catch(n){404===e.status&&""===t?(l=204,c="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(s=null==r?void 0:r.details)||void 0===s?void 0:s.includes("0 rows"))&&(r=null,l=200,c="OK"),r&&this.shouldThrowOnError)throw new i.default(r)}return{error:r,data:a,count:o,status:l,statusText:c}}));return this.shouldThrowOnError||(n=n.catch((e=>{var t,n,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},825:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(261));class i extends r.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=i},907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>o,Response:()=>l,default:()=>i,fetch:()=>r});var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();const r=s.fetch,i=s.fetch.bind(s),a=s.Headers,o=s.Request,l=s.Response},961:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(45)),i=s(n(825)),a=n(530);class o{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new r.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new o(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:r}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;n||s?(a=n?"HEAD":"GET",Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`])).forEach((([e,t])=>{o.searchParams.append(e,t)}))):(a="POST",l=t);const c=Object.assign({},this.headers);return r&&(c.Prefer=`count=${r}`),new i.default({method:a,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=o}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}a.m=r,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"==typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"==typeof n.then)return n}var r=Object.create(null);a.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,a.d(r,i),r},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>e+".bundle.js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},s="website-absensi:",a.l=(e,t,r,i)=>{if(n[e])n[e].push(t);else{var o,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==s+r){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",s+r),o.src=e),n[e]=[t];var d=(t,s)=>{o.onerror=o.onload=null,clearTimeout(f);var r=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(s))),t)return t(s)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={792:0};a.f.j=(t,n)=>{var s=a.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var r=new Promise(((n,r)=>s=e[t]=[n,r]));n.push(s[2]=r);var i=a.p+a.u(t),o=new Error;a.l(i,(n=>{if(a.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,s[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var s,r,[i,o,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)l(a)}for(t&&t(n);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkwebsite_absensi=self.webpackChunkwebsite_absensi||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";a(452);const e={parseActiveUrlWithCombiner(){const e=window.location.hash.slice(1).toLowerCase(),t=this._urlSplitter(e);return this._urlCombiner(t)},parseActiveUrlWithoutCombiner(){const e=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(e)},_urlSplitter(e){const t=e.split("/");return{resource:t[1]||null,id:t[2]||null,verb:t[3]||null}},_urlCombiner:e=>(e.resource?`/${e.resource}`:"/")+(e.id?"/:id":"")+(e.verb?`/${e.verb}`:"")};class t extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class n extends t{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class s extends t{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class r extends t{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var i;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(i||(i={}));var o=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};class l{constructor(e,{headers:t={},customFetch:n,region:s=i.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(a.bind(a,907)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return o(this,void 0,void 0,(function*(){try{const{headers:a,method:o,body:l}=t;let c,u={},{region:h}=t;h||(h=this.region),h&&"any"!==h&&(u["x-region"]=h),l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&("undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",c=l):"string"==typeof l?(u["Content-Type"]="text/plain",c=l):"undefined"!=typeof FormData&&l instanceof FormData?c=l:(u["Content-Type"]="application/json",c=JSON.stringify(l)));const d=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:c}).catch((e=>{throw new n(e)})),f=d.headers.get("x-relay-error");if(f&&"true"===f)throw new s(d);if(!d.ok)throw new r(d);let m,p=(null!==(i=d.headers.get("Content-Type"))&&void 0!==i?i:"text/plain").split(";")[0].trim();return m="application/json"===p?yield d.json():"application/octet-stream"===p?yield d.blob():"text/event-stream"===p?d:"multipart/form-data"===p?yield d.formData():yield d.text(),{data:m,error:null}}catch(e){return{data:null,error:e}}}))}}var c=a(279);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:d,PostgrestTransformBuilder:f,PostgrestBuilder:m,PostgrestError:p}=c,g={"X-Client-Info":"realtime-js/2.11.2"};var y,v,w,b,k,_;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(y||(y={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(v||(v={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(w||(w={})),function(e){e.websocket="websocket"}(b||(b={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(k||(k={}));class S{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+s));i+=s;const o=n.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class T{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(_||(_={}));const E=(e,t,n={})=>{var s;const r=null!==(s=n.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce(((n,s)=>(n[s]=I(s,e,t,r),n)),{})},I=(e,t,n,s)=>{const r=t.find((t=>t.name===e)),i=null==r?void 0:r.type,a=n[e];return i&&!s.includes(i)?O(i,a):x(a)},O=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return P(t,n)}switch(e){case _.bool:return j(t);case _.float4:case _.float8:case _.int2:case _.int4:case _.int8:case _.numeric:case _.oid:return C(t);case _.json:case _.jsonb:return $(t);case _.timestamp:return L(t);case _.abstime:case _.date:case _.daterange:case _.int4range:case _.int8range:case _.money:case _.reltime:case _.text:case _.time:case _.timestamptz:case _.timetz:case _.tsrange:case _.tstzrange:default:return x(t)}},x=e=>e,j=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},C=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},P=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch(e){s=r?r.split(","):[]}return s.map((e=>O(t,e)))}return e},L=e=>"string"==typeof e?e.replace(" ","T"):e,A=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class D{constructor(e,t,n={},s=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var N,M,R,U;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(N||(N={}));class B{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=B.syncState(this.state,e,t,n),this.pendingDiffs.forEach((e=>{this.state=B.syncDiff(this.state,e,t,n)})),this.pendingDiffs=[],s()})),this.channel._on(n.diff,{},(e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=B.syncDiff(this.state,e,t,n),s())})),this.onJoin(((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})})),this.onLeave(((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,n,s){const r=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(r,((e,t)=>{i[e]||(o[e]=t)})),this.map(i,((e,t)=>{const n=r[e];if(n){const s=t.map((e=>e.presence_ref)),r=n.map((e=>e.presence_ref)),i=t.filter((e=>r.indexOf(e.presence_ref)<0)),l=n.filter((e=>s.indexOf(e.presence_ref)<0));i.length>0&&(a[e]=i),l.length>0&&(o[e]=l)}else a[e]=t})),this.syncDiff(r,{joins:a,leaves:o},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,((t,s)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),i.length>0){const n=e[t].map((e=>e.presence_ref)),s=i.filter((e=>n.indexOf(e.presence_ref)<0));e[t].unshift(...s)}n(t,i,s)})),this.map(i,((t,n)=>{let r=e[t];if(!r)return;const i=n.map((e=>e.presence_ref));r=r.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=r,s(t,r,n),0===r.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((n=>t(n,e[n])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):s,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(M||(M={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(R||(R={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(U||(U={}));class F{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=v.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new D(this,w.join,this.params,this.timeout),this.rejoinTimer=new T((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=v.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=v.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=v.errored,this.rejoinTimer.scheduleTimeout())})),this._on(w.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new B(this),this.broadcastEndpointURL=A(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:i,private:a}}=this.params;this._onError((t=>null==e?void 0:e(U.CHANNEL_ERROR,t))),this._onClose((()=>null==e?void 0:e(U.CLOSED)));const o={},l={broadcast:r,presence:i,postgres_changes:null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((e=>e.filter)))&&void 0!==s?s:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const s=this.bindings.postgres_changes,r=null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0,i=[];for(let n=0;n<r;n++){const r=s[n],{filter:{event:a,schema:o,table:l,filter:c}}=r,u=t&&t[n];if(!u||u.event!==a||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),void(null==e||e(U.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(U.SUBSCRIBED))}null==e||e(U.SUBSCRIBED)})).receive("error",(t=>{null==e||e(U.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null==e||e(U.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise((n=>{var s,r,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",(()=>n("ok"))),a.receive("error",(()=>n("error"))),a.receive("timeout",(()=>n("timed out")))}));{const{event:r,payload:i}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=v.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(w.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((n=>{const s=new D(this,w.leave,{},e);s.receive("ok",(()=>{t(),n("ok")})).receive("timeout",(()=>{t(),n("timed out")})).receive("error",(()=>{n("error")})),s.send(),this._canPush()||s.trigger("ok",{})}))}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout((()=>s.abort()),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new D(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=w;if(n&&[a,o,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter((e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===i})).map((e=>e.callback(u,n))):null===(r=this.bindings[i])||void 0===r||r.filter((e=>{var n,s,r,a,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:i}=e,a={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:i};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,n)}))}_isClosed(){return this.state===v.closed}_isJoined(){return this.state===v.joined}_isJoining(){return this.state===v.joining}_isLeaving(){return this.state===v.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&F.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(w.close,{},e)}_onError(e){this._on(w.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=v.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=E(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=E(e.columns,e.old_record)),t}}const V=()=>{},q="undefined"!=typeof WebSocket;class z{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=g,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=V,this.conn=null,this.sendBuffer=[],this.serializer=new S,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(a.bind(a,907)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${b.websocket}`,this.httpEndpoint=A(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new T((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});else{if(q)return this.conn=new WebSocket(this.endpointURL()),void this.setupConnection();this.conn=new W(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),a.e(591).then(a.t.bind(a,591,23)).then((({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case y.connecting:return k.Connecting;case y.open:return k.Open;case y.closing:return k.Closing;default:return k.Closed}}isConnected(){return this.connectionState()===k.Open}channel(e,t={config:{}}){const n=new F(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:r}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${n} (${r})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let e=null;try{e=JSON.parse(atob(t.split(".")[1]))}catch(e){}if(e&&e.exp){if(!(Math.floor(Date.now()/1e3)-e.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`)}this.accessTokenValue=t,this.channels.forEach((e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(w.access_token,{access_token:t})}))}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:s,ref:r}=e;r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${r&&"("+r+")"||""}`,s),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,s,r))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(w.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class W{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=y.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class J extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Z(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class H extends J{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class G extends J{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Y=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};const K=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(a.bind(a,907)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Q=e=>{if(Array.isArray(e))return e.map((e=>Q(e)));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((([e,n])=>{const s=e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[s]=Q(n)})),t};var X=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};const ee=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),te=(e,t,n)=>X(void 0,void 0,void 0,(function*(){const s=yield Y(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(a.bind(a,907))).Response:Response}));e instanceof s&&!(null==n?void 0:n.noResolveJson)?e.json().then((n=>{t(new H(ee(n),e.status||500))})).catch((e=>{t(new G(ee(e),e))})):t(new G(ee(e),e))}));function ne(e,t,n,s,r,i){return X(this,void 0,void 0,(function*(){return new Promise(((a,o)=>{e(n,((e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),n))})(t,s,r,i)).then((e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()})).then((e=>a(e))).catch((e=>te(e,o,s)))}))}))}function se(e,t,n,s){return X(this,void 0,void 0,(function*(){return ne(e,"GET",t,n,s)}))}function re(e,t,n,s,r){return X(this,void 0,void 0,(function*(){return ne(e,"POST",t,s,r,n)}))}function ie(e,t,n,s,r){return X(this,void 0,void 0,(function*(){return ne(e,"DELETE",t,s,r,n)}))}var ae=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};const oe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},le={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ce{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=K(s)}uploadOrUpdate(e,t,n,s){return ae(this,void 0,void 0,(function*(){try{let r;const i=Object.assign(Object.assign({},le),s);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),o&&r.append("metadata",this.encodeMetadata(o)),r.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",i.cacheControl),o&&r.append("metadata",this.encodeMetadata(o))):(r=n,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==s?void 0:s.headers)&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:r,headers:a},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),h=yield u.json();if(u.ok)return{data:{path:l,id:h.Id,fullPath:h.Key},error:null};return{data:null,error:h}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}upload(e,t,n){return ae(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,n)}))}uploadToSignedUrl(e,t,n,s){return ae(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:le.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:i}),l=yield o.json();if(o.ok)return{data:{path:r,fullPath:l.Key},error:null};return{data:null,error:l}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e,t){return ae(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");const r=yield re(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+r.url),a=i.searchParams.get("token");if(!a)throw new J("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}update(e,t,n){return ae(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,n)}))}move(e,t,n){return ae(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}copy(e,t,n){return ae(this,void 0,void 0,(function*(){try{return{data:{path:(yield re(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,n){return ae(this,void 0,void 0,(function*(){try{let s=this._getFinalPath(e),r=yield re(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,n){return ae(this,void 0,void 0,(function*(){try{const s=yield re(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null}))),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}download(e,t){return ae(this,void 0,void 0,(function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),r=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield se(this.fetch,`${this.url}/${n}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}info(e){return ae(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield se(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Q(e),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}exists(e){return ae(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return X(this,void 0,void 0,(function*(){return ne(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(Z(e)&&e instanceof G){const t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}))}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&s.push(r);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${o}`)}}}remove(e){return ae(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}list(e,t,n){return ae(this,void 0,void 0,(function*(){try{const s=Object.assign(Object.assign(Object.assign({},oe),t),{prefix:e||""});return{data:yield re(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const ue={"X-Client-Info":"storage-js/2.7.1"};var he=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};class de{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},ue),t),this.fetch=K(n)}listBuckets(){return he(this,void 0,void 0,(function*(){try{return{data:yield se(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}getBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield se(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return he(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return he(this,void 0,void 0,(function*(){try{const n=yield function(e,t,n,s,r){return X(this,void 0,void 0,(function*(){return ne(e,"PUT",t,s,r,n)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return he(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}}))}}class fe extends de{constructor(e,t={},n){super(e,t,n)}from(e){return new ce(this.url,this.headers,e,this.fetch)}}let me="";me="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const pe={headers:{"X-Client-Info":`supabase-js-${me}/2.49.4`}},ge={schema:"public"},ye={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ve={};var we=a(907),be=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};const ke=e=>{let t;return t=e||("undefined"==typeof fetch?we.default:fetch),(...e)=>t(...e)},_e=(e,t,n)=>{const s=ke(n),r="undefined"==typeof Headers?we.Headers:Headers;return(n,i)=>be(void 0,void 0,void 0,(function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new r(null==i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(n,Object.assign(Object.assign({},i),{headers:l}))}))};var Se=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};const Te="2.69.1",Ee=3e4,Ie=9e4,Oe={"X-Client-Info":`gotrue-js/${Te}`},xe="X-Supabase-Api-Version",je={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Ce=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class $e extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Pe(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Le extends $e{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Ae extends $e{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class De extends $e{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Ne extends De{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Me extends De{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Re extends De{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ue extends De{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Be extends De{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fe extends De{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ve(e){return Pe(e)&&"AuthRetryableFetchError"===e.name}class qe extends De{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class ze extends De{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Je=" \t\n\r=".split(""),Ze=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Je.length;t+=1)e[Je[t].charCodeAt(0)]=-2;for(let t=0;t<We.length;t+=1)e[We[t].charCodeAt(0)]=t;return e})();function He(e,t,n){const s=Ze[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ge(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let t=0;t<e.length;t+=1)He(e.charCodeAt(t),r,i);return t.join("")}function Ye(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Ke(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Ye(s,t)}}function Qe(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)He(e.charCodeAt(t),n,s);return new Uint8Array(t)}const Xe=()=>"undefined"!=typeof window&&"undefined"!=typeof document,et={tested:!1,writable:!1},tt=()=>{if(!Xe())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(et.tested)return et.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),et.tested=!0,et.writable=!0}catch(e){et.tested=!0,et.writable=!1}return et.writable};const nt=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(a.bind(a,907)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},st=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},rt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(e){return n}},it=async(e,t)=>{await e.removeItem(t)};class at{constructor(){this.promise=new at.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function ot(e){const t=e.split(".");if(3!==t.length)throw new ze("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!Ce.test(t[e]))throw new ze("JWT not in base64url format");return{header:JSON.parse(Ge(t[0])),payload:JSON.parse(Ge(t[1])),signature:Qe(t[2]),raw:{header:t[0],payload:t[1]}}}function lt(e){return("0"+e.toString(16)).substr(-2)}async function ct(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ut(e,t,n=!1){const s=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,lt).join("")}();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await st(e,`${t}-code-verifier`,r);const i=await ct(s);return[i,s===i?"plain":"s256"]}at.promiseConstructor=Promise;const ht=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;var dt=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const ft=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mt=[502,503,504];async function pt(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new Fe(ft(e),0);if(mt.includes(e.status))throw new Fe(ft(e),e.status);let s,r;try{s=await e.json()}catch(e){throw new Ae(ft(e),e)}const i=function(e){const t=e.headers.get(xe);if(!t)return null;if(!t.match(ht))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(i&&i.getTime()>=je.timestamp&&"object"==typeof s&&s&&"string"==typeof s.code?r=s.code:"object"==typeof s&&s&&"string"==typeof s.error_code&&(r=s.error_code),r){if("weak_password"===r)throw new qe(ft(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new Ne}else if("object"==typeof s&&s&&"object"==typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new qe(ft(s),e.status,s.weak_password.reasons);throw new Le(ft(s),e.status||500,r)}async function gt(e,t,n,s){var r;const i=Object.assign({},null==s?void 0:s.headers);i[xe]||(i[xe]=je.name),(null==s?void 0:s.jwt)&&(i.Authorization=`Bearer ${s.jwt}`);const a=null!==(r=null==s?void 0:s.query)&&void 0!==r?r:{};(null==s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,s,r,i){const a=((e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))})(t,s,r,i);let o;try{o=await e(n,Object.assign({},a))}catch(e){throw console.error(e),new Fe(ft(e),0)}o.ok||await pt(o);if(null==s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(e){await pt(e)}}(e,t,n+o,{headers:i,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function yt(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function vt(e){const t=yt(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function wt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function bt(e){return{data:e,error:null}}function kt(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=e,a=dt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},user:Object.assign({},a)},error:null}}function _t(e){return e}var St=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class Tt{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=nt(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await gt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(Pe(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await gt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:wt})}catch(e){if(Pe(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,n=St(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null==n?void 0:n.newEmail,delete s.newEmail),await gt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:kt,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(Pe(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await gt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wt})}catch(e){if(Pe(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,n,s,r,i,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await gt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:_t});if(c.error)throw c.error;const u=await c.json(),h=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t})),l.total=parseInt(h)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(e){if(Pe(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await gt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wt})}catch(e){if(Pe(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await gt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:wt})}catch(e){if(Pe(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await gt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:wt})}catch(e){if(Pe(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{const{data:t,error:n}=await gt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(e){if(Pe(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await gt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(Pe(e))return{data:null,error:e};throw e}}}const Et={getItem:e=>tt()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{tt()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{tt()&&globalThis.localStorage.removeItem(e)}};function It(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ot=!!(globalThis&&tt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class xt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jt extends xt{}async function Ct(e,t,n){Ot&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout((()=>{s.abort(),Ot&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},(async s=>{if(!s){if(0===t)throw Ot&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new jt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ot)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Ot&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Ot&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const $t={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Oe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pt(e,t,n){return await n()}class Lt{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Lt.nextInstanceID,Lt.nextInstanceID+=1,this.instanceID>0&&Xe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},$t),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Tt({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nt(s.fetch),this.lock=s.lock||Pt,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Xe()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Ct:this.lock=Pt,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:tt()?this.storage=Et:(this.memoryStorage={},this.storage=It(this.memoryStorage)):(this.memoryStorage={},this.storage=It(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Te}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((e,n)=>{t[n]=e}))}catch(e){}return n.searchParams.forEach(((e,n)=>{t[n]=e})),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Xe()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),function(e){return Pe(e)&&"AuthImplicitGrantRedirectError"===e.name}(r)){const t=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:r}}return await this._removeSession(),{error:r}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout((async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Pe(e)?{error:e}:{error:new Ae("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const r=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:yt}),{data:i,error:a}=r;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,n,s;try{let r;if("email"in e){const{email:n,password:s,options:i}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await ut(this.storage,this.storageKey)),r=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:yt})}else{if(!("phone"in e))throw new Re("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;r=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(s=null==a?void 0:a.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:yt})}}const{data:i,error:a}=r;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:r}=e;t=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:vt})}else{if(!("phone"in e))throw new Re("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:vt})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new Me}}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,n,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await rt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(null!=t?t:"").split("/");try{const{data:t,error:r}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:yt});if(await it(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new Me}}catch(e){if(Pe(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:r,nonce:i}=e,a=await gt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:yt}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new Me}}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,n,s,r,i;try{if("email"in e){const{email:s,options:r}=e;let i=null,a=null;"pkce"===this.flowType&&([i,a]=await ut(this.storage,this.storageKey));const{error:o}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null==r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null==n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new Re("You must provide either an email or phone number.")}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,n;try{let s,r;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await gt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:yt});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,n,s;try{let r=null,i=null;return"pkce"===this.flowType&&([r,i]=await ut(this.storage,this.storageKey)),await gt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:bt})}catch(e){if(Pe(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Ne;const{error:s}=await gt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:r}=e,{error:i}=await gt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:i,error:a}=await gt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:a}}throw new Re("You must provide either an email or phone number and a type")}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await rt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Ie;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wt}):await this._useSession((async e=>{var t,n,s;const{data:r,error:i}=e;if(i)throw i;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:wt}):{data:{user:null},error:new Ne}}))}catch(e){if(Pe(e))return function(e){return Pe(e)&&"AuthSessionMissingError"===e.name}(e)&&(await this._removeSession(),await it(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new Ne;const i=s.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await ut(this.storage,this.storageKey));const{data:l,error:c}=await gt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:wt});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(e){if(Pe(e))return{data:{user:null},error:e};throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ne;const t=Date.now()/1e3;let n=t,s=!0,r=null;const{payload:i}=ot(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(Pe(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new Ne;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(Pe(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!Xe())throw new Ue("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ue(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Be("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ue("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Be("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:i,expires_in:a,expires_at:o,token_type:l}=e;if(!(r&&a&&i&&l))throw new Ue("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let h=c+u;o&&(h=parseInt(o));const d=h-c;1e3*d<=Ee&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);const f=h-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,h,c);const{data:m,error:p}=await this._getUser(r);if(p)throw p;const g={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:u,expires_at:h,refresh_token:i,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(e){if(Pe(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await rt(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const i=null===(n=s.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Pe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await it(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession((async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(t){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let n=null,s=null;"pkce"===this.flowType&&([n,s]=await ut(this.storage,this.storageKey,!0));try{return await gt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(Pe(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(Pe(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession((async t=>{var n,s,r,i,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await gt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})}));if(s)throw s;return Xe()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(t){if(Pe(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var n,s;const{data:r,error:i}=t;if(i)throw i;return await gt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})}))}catch(e){if(Pe(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await gt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yt})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ve(t)&&Date.now()+n-r<Ee},new Promise(((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await n(r);if(!s(r,null,t))return void e(t)}catch(e){if(!s(r,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),Pe(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Xe()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await rt(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const s=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<Ie;if(this._debug(t,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),Ve(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Ne;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new at;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Ne;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(e){if(this._debug(s,"error",e),Pe(e)){const n={session:null,error:e};return Ve(e)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(n),n}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(e),e}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(e,t)}catch(e){s.push(e)}}));if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await st(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await it(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xe()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),Ee);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-e)/Ee);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof xt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await ut(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await gt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Pe(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var n,s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await gt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null==o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}))}catch(e){if(Pe(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:a}=await gt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})}))}catch(e){if(Pe(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await gt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(Pe(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],s=n.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),r=n.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:n,totp:s,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ot(s.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find((t=>t.kid===e));if(n)return n;if(n=this.jwks.keys.find((t=>t.kid===e)),n&&this.jwks_cached_at+6e5>Date.now())return n;const{data:s,error:r}=await gt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;if(!s.keys||0===s.keys.length)throw new ze("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find((t=>t.kid===e)),!n)throw new ze("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:r,signature:i,raw:{header:a,payload:o}}=ot(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp),!s.kid||"HS256"===s.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:r,header:s,signature:i},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),c=await this.fetchJwk(s.kid,t),u=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!await crypto.subtle.verify(l,u,i,function(e){const t=[];return Ke(e,(e=>t.push(e))),new Uint8Array(t)}(`${a}.${o}`)))throw new ze("Invalid JWT signature");return{data:{claims:r,header:s,signature:i},error:null}}catch(e){if(Pe(e))return{data:null,error:e};throw e}}}Lt.nextInstanceID=0;const At=Lt;class Dt extends At{constructor(e){super(e)}}var Nt=function(e,t,n,s){return new(n||(n=Promise))((function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((s=s.apply(e,t||[])).next())}))};class Mt{constructor(e,t,n){var s,r,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=e.replace(/\/$/,"");this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const o=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l=function(e,t){const{db:n,auth:s,realtime:r,global:i}=e,{db:a,auth:o,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),i),accessToken:()=>Se(this,void 0,void 0,(function*(){return""}))};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}(null!=n?n:{},{db:ge,realtime:ve,auth:Object.assign(Object.assign({},ye),{storageKey:o}),global:pe});this.storageKey=null!==(s=l.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(r=l.global.headers)&&void 0!==r?r:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=l.auth)&&void 0!==i?i:{},this.headers,l.global.fetch),this.fetch=_e(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new u(`${a}/rest/v1`,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new l(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fe(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Nt(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:r,flowType:i,lock:a,debug:o},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dt({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:i,lock:a,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new z(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Rt=(e,t,n)=>new Mt(e,t,n),Ut=Rt("https://oteebvgtsvgrkfooinrv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im90ZWVidmd0c3Zncmtmb29pbnJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwNDU1NzQsImV4cCI6MjA1ODYyMTU3NH0.IE1UReAZZk-9fbqi8SV3EF86Py703eoJVvpEBbzCBAo");class Bt extends Error{}class Ft extends Bt{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Vt extends Bt{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class qt extends Bt{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class zt extends Bt{}class Wt extends Bt{constructor(e){super(`Invalid unit ${e}`)}}class Jt extends Bt{}class Zt extends Bt{constructor(){super("Zone is an abstract class")}}const Ht="numeric",Gt="short",Yt="long",Kt={year:Ht,month:Ht,day:Ht},Qt={year:Ht,month:Gt,day:Ht},Xt={year:Ht,month:Gt,day:Ht,weekday:Gt},en={year:Ht,month:Yt,day:Ht},tn={year:Ht,month:Yt,day:Ht,weekday:Yt},nn={hour:Ht,minute:Ht},sn={hour:Ht,minute:Ht,second:Ht},rn={hour:Ht,minute:Ht,second:Ht,timeZoneName:Gt},an={hour:Ht,minute:Ht,second:Ht,timeZoneName:Yt},on={hour:Ht,minute:Ht,hourCycle:"h23"},ln={hour:Ht,minute:Ht,second:Ht,hourCycle:"h23"},cn={hour:Ht,minute:Ht,second:Ht,hourCycle:"h23",timeZoneName:Gt},un={hour:Ht,minute:Ht,second:Ht,hourCycle:"h23",timeZoneName:Yt},hn={year:Ht,month:Ht,day:Ht,hour:Ht,minute:Ht},dn={year:Ht,month:Ht,day:Ht,hour:Ht,minute:Ht,second:Ht},fn={year:Ht,month:Gt,day:Ht,hour:Ht,minute:Ht},mn={year:Ht,month:Gt,day:Ht,hour:Ht,minute:Ht,second:Ht},pn={year:Ht,month:Gt,day:Ht,weekday:Gt,hour:Ht,minute:Ht},gn={year:Ht,month:Yt,day:Ht,hour:Ht,minute:Ht,timeZoneName:Gt},yn={year:Ht,month:Yt,day:Ht,hour:Ht,minute:Ht,second:Ht,timeZoneName:Gt},vn={year:Ht,month:Yt,day:Ht,weekday:Yt,hour:Ht,minute:Ht,timeZoneName:Yt},wn={year:Ht,month:Yt,day:Ht,weekday:Yt,hour:Ht,minute:Ht,second:Ht,timeZoneName:Yt};class bn{get type(){throw new Zt}get name(){throw new Zt}get ianaName(){return this.name}get isUniversal(){throw new Zt}offsetName(e,t){throw new Zt}formatOffset(e,t){throw new Zt}offset(e){throw new Zt}equals(e){throw new Zt}get isValid(){throw new Zt}}let kn=null;class _n extends bn{static get instance(){return null===kn&&(kn=new _n),kn}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Vs(e,t,n)}formatOffset(e,t){return Js(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}const Sn=new Map;const Tn={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};const En=new Map;class In extends bn{static create(e){let t=En.get(e);return void 0===t&&En.set(e,t=new In(e)),t}static resetCache(){En.clear(),Sn.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=In.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Vs(e,t,n,this.name)}formatOffset(e,t){return Js(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const n=function(e){let t=Sn.get(e);return void 0===t&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Sn.set(e,t)),t}(this.name);let[s,r,i,a,o,l,c]=n.formatToParts?function(e,t){const n=e.formatToParts(t),s=[];for(let e=0;e<n.length;e++){const{type:t,value:r}=n[e],i=Tn[t];"era"===t?s[i]=r:ks(i)||(s[i]=parseInt(r,10))}return s}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,r,i,a,o,l,c,u]=s;return[a,r,i,o,l,c,u]}(n,t);"BC"===a&&(s=1-Math.abs(s));let u=+t;const h=u%1e3;return u-=h>=0?h:1e3+h,(Rs({year:s,month:r,day:i,hour:24===o?0:o,minute:l,second:c,millisecond:0})-u)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let On={};const xn=new Map;function jn(e,t={}){const n=JSON.stringify([e,t]);let s=xn.get(n);return void 0===s&&(s=new Intl.DateTimeFormat(e,t),xn.set(n,s)),s}const Cn=new Map;const $n=new Map;let Pn=null;const Ln=new Map;function An(e){let t=Ln.get(e);return void 0===t&&(t=new Intl.DateTimeFormat(e).resolvedOptions(),Ln.set(e,t)),t}const Dn=new Map;function Nn(e,t,n,s){const r=e.listingMode();return"error"===r?null:"en"===r?n(t):s(t)}class Mn{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:s,floor:r,...i}=n;if(!t||Object.keys(i).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const n=JSON.stringify([e,t]);let s=Cn.get(n);return void 0===s&&(s=new Intl.NumberFormat(e,t),Cn.set(n,s)),s}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return Cs(this.floor?Math.floor(e):As(e,3),this.padTo)}}class Rn{constructor(e,t,n){let s;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&In.create(n).valid?(s=n,this.dt=e):(s="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,s=e.zone.name):(s="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const r={...this.opts};r.timeZone=r.timeZone||s,this.dtf=jn(t,r)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Un{constructor(e,t,n){this.opts={style:"long",...n},!t&&Ts()&&(this.rtf=function(e,t={}){const{base:n,...s}=t,r=JSON.stringify([e,s]);let i=$n.get(r);return void 0===i&&(i=new Intl.RelativeTimeFormat(e,t),$n.set(r,i)),i}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",s=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},i=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&i){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${r[e][0]}`;case-1:return n?"yesterday":`last ${r[e][0]}`;case 0:return n?"today":`this ${r[e][0]}`}}const a=Object.is(t,-0)||t<0,o=Math.abs(t),l=1===o,c=r[e],u=s?l?c[1]:c[2]||c[1]:l?r[e][0]:e;return a?`${o} ${u} ago`:`in ${o} ${u}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Bn={firstDay:1,minimalDays:4,weekend:[6,7]};class Fn{static fromOpts(e){return Fn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,s,r=!1){const i=e||is.defaultLocale,a=i||(r?"en-US":Pn||(Pn=(new Intl.DateTimeFormat).resolvedOptions().locale,Pn)),o=t||is.defaultNumberingSystem,l=n||is.defaultOutputCalendar,c=xs(s)||is.defaultWeekSettings;return new Fn(a,o,l,c,i)}static resetCache(){Pn=null,xn.clear(),Cn.clear(),$n.clear(),Ln.clear(),Dn.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:s}={}){return Fn.create(e,t,n,s)}constructor(e,t,n,s,r){const[i,a,o]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,s;try{t=jn(e).resolvedOptions(),s=e}catch(r){const i=e.substring(0,n);t=jn(i).resolvedOptions(),s=i}const{numberingSystem:r,calendar:i}=t;return[s,r,i]}}(e);this.locale=i,this.numberingSystem=t||a||null,this.outputCalendar=n||o||null,this.weekSettings=s,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===An(e.locale).numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?Fn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,xs(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Nn(this,e,Ks,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=function(e){const t=[];for(let n=1;n<=12;n++){const s=ea.utc(2009,n,1);t.push(e(s))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[s][e]}))}weekdays(e,t=!1){return Nn(this,e,tr,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=function(e){const t=[];for(let n=1;n<=7;n++){const s=ea.utc(2016,11,13+n);t.push(e(s))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[s][e]}))}meridiems(){return Nn(this,void 0,(()=>nr),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ea.utc(2016,11,13,9),ea.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return Nn(this,e,ar,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[ea.utc(-40,1,1),ea.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const s=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return s?s.value:null}numberFormatter(e={}){return new Mn(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Rn(e,this.intl,t)}relFormatter(e={}){return new Un(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const n=JSON.stringify([e,t]);let s=On[n];return s||(s=new Intl.ListFormat(e,t),On[n]=s),s}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||An(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Es()?function(e){let t=Dn.get(e);if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,"minimalDays"in t||(t={...Bn,...t}),Dn.set(e,t)}return t}(this.locale):Bn}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Vn=null;class qn extends bn{static get utcInstance(){return null===Vn&&(Vn=new qn(0)),Vn}static instance(e){return 0===e?qn.utcInstance:new qn(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new qn(qs(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${Js(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${Js(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Js(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class zn extends bn{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Wn(e,t){if(ks(e)||null===e)return t;if(e instanceof bn)return e;if("string"==typeof e){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?_n.instance:"utc"===n||"gmt"===n?qn.utcInstance:qn.parseSpecifier(n)||In.create(e)}return _s(e)?qn.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new zn(e)}const Jn={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Zn={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Hn=Jn.hanidec.replace(/[\[|\]]/g,"").split("");const Gn=new Map;function Yn({numberingSystem:e},t=""){const n=e||"latn";let s=Gn.get(n);void 0===s&&(s=new Map,Gn.set(n,s));let r=s.get(t);return void 0===r&&(r=new RegExp(`${Jn[n]}${t}`),s.set(t,r)),r}let Kn,Qn=()=>Date.now(),Xn="system",es=null,ts=null,ns=null,ss=60,rs=null;class is{static get now(){return Qn}static set now(e){Qn=e}static set defaultZone(e){Xn=e}static get defaultZone(){return Wn(Xn,_n.instance)}static get defaultLocale(){return es}static set defaultLocale(e){es=e}static get defaultNumberingSystem(){return ts}static set defaultNumberingSystem(e){ts=e}static get defaultOutputCalendar(){return ns}static set defaultOutputCalendar(e){ns=e}static get defaultWeekSettings(){return rs}static set defaultWeekSettings(e){rs=xs(e)}static get twoDigitCutoffYear(){return ss}static set twoDigitCutoffYear(e){ss=e%100}static get throwOnInvalid(){return Kn}static set throwOnInvalid(e){Kn=e}static resetCaches(){Fn.resetCache(),In.resetCache(),ea.resetCache(),Gn.clear()}}class as{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const os=[0,31,59,90,120,151,181,212,243,273,304,334],ls=[0,31,60,91,121,152,182,213,244,274,305,335];function cs(e,t){return new as("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function us(e,t,n){const s=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const r=s.getUTCDay();return 0===r?7:r}function hs(e,t,n){return n+(Ds(e)?ls:os)[t-1]}function ds(e,t){const n=Ds(e)?ls:os,s=n.findIndex((e=>e<t));return{month:s+1,day:t-n[s]}}function fs(e,t){return(e-t+7)%7+1}function ms(e,t=4,n=1){const{year:s,month:r,day:i}=e,a=hs(s,r,i),o=fs(us(s,r,i),n);let l,c=Math.floor((a-o+14-t)/7);return c<1?(l=s-1,c=Bs(l,t,n)):c>Bs(s,t,n)?(l=s+1,c=1):l=s,{weekYear:l,weekNumber:c,weekday:o,...Zs(e)}}function ps(e,t=4,n=1){const{weekYear:s,weekNumber:r,weekday:i}=e,a=fs(us(s,1,t),n),o=Ns(s);let l,c=7*r+i-a-7+t;c<1?(l=s-1,c+=Ns(l)):c>o?(l=s+1,c-=Ns(s)):l=s;const{month:u,day:h}=ds(l,c);return{year:l,month:u,day:h,...Zs(e)}}function gs(e){const{year:t,month:n,day:s}=e;return{year:t,ordinal:hs(t,n,s),...Zs(e)}}function ys(e){const{year:t,ordinal:n}=e,{month:s,day:r}=ds(t,n);return{year:t,month:s,day:r,...Zs(e)}}function vs(e,t){if(!ks(e.localWeekday)||!ks(e.localWeekNumber)||!ks(e.localWeekYear)){if(!ks(e.weekday)||!ks(e.weekNumber)||!ks(e.weekYear))throw new zt("Cannot mix locale-based week fields with ISO-based week fields");return ks(e.localWeekday)||(e.weekday=e.localWeekday),ks(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),ks(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function ws(e){const t=Ss(e.year),n=js(e.month,1,12),s=js(e.day,1,Ms(e.year,e.month));return t?n?!s&&cs("day",e.day):cs("month",e.month):cs("year",e.year)}function bs(e){const{hour:t,minute:n,second:s,millisecond:r}=e,i=js(t,0,23)||24===t&&0===n&&0===s&&0===r,a=js(n,0,59),o=js(s,0,59),l=js(r,0,999);return i?a?o?!l&&cs("millisecond",r):cs("second",s):cs("minute",n):cs("hour",t)}function ks(e){return void 0===e}function _s(e){return"number"==typeof e}function Ss(e){return"number"==typeof e&&e%1==0}function Ts(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Es(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function Is(e,t,n){if(0!==e.length)return e.reduce(((e,s)=>{const r=[t(s),s];return e&&n(e[0],r[0])===e[0]?e:r}),null)[1]}function Os(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function xs(e){if(null==e)return null;if("object"!=typeof e)throw new Jt("Week settings must be an object");if(!js(e.firstDay,1,7)||!js(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!js(e,1,7))))throw new Jt("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function js(e,t,n){return Ss(e)&&e>=t&&e<=n}function Cs(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function $s(e){return ks(e)||null===e||""===e?void 0:parseInt(e,10)}function Ps(e){return ks(e)||null===e||""===e?void 0:parseFloat(e)}function Ls(e){if(!ks(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function As(e,t,n=!1){const s=10**t;return(n?Math.trunc:Math.round)(e*s)/s}function Ds(e){return e%4==0&&(e%100!=0||e%400==0)}function Ns(e){return Ds(e)?366:365}function Ms(e,t){const n=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===n?Ds(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Rs(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Us(e,t,n){return-fs(us(e,1,t),n)+t-1}function Bs(e,t=4,n=1){const s=Us(e,t,n),r=Us(e+1,t,n);return(Ns(e)-s+r)/7}function Fs(e){return e>99?e:e>is.twoDigitCutoffYear?1900+e:2e3+e}function Vs(e,t,n,s=null){const r=new Date(e),i={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(i.timeZone=s);const a={timeZoneName:t,...i},o=new Intl.DateTimeFormat(n,a).formatToParts(r).find((e=>"timezonename"===e.type.toLowerCase()));return o?o.value:null}function qs(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const s=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-s:s)}function zs(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new Jt(`Invalid unit value ${e}`);return t}function Ws(e,t){const n={};for(const s in e)if(Os(e,s)){const r=e[s];if(null==r)continue;n[t(s)]=zs(r)}return n}function Js(e,t){const n=Math.trunc(Math.abs(e/60)),s=Math.trunc(Math.abs(e%60)),r=e>=0?"+":"-";switch(t){case"short":return`${r}${Cs(n,2)}:${Cs(s,2)}`;case"narrow":return`${r}${n}${s>0?`:${s}`:""}`;case"techie":return`${r}${Cs(n,2)}${Cs(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Zs(e){return function(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}(e,["hour","minute","second","millisecond"])}const Hs=["January","February","March","April","May","June","July","August","September","October","November","December"],Gs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ys=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ks(e){switch(e){case"narrow":return[...Ys];case"short":return[...Gs];case"long":return[...Hs];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Qs=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Xs=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],er=["M","T","W","T","F","S","S"];function tr(e){switch(e){case"narrow":return[...er];case"short":return[...Xs];case"long":return[...Qs];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const nr=["AM","PM"],sr=["Before Christ","Anno Domini"],rr=["BC","AD"],ir=["B","A"];function ar(e){switch(e){case"narrow":return[...ir];case"short":return[...rr];case"long":return[...sr];default:return null}}function or(e,t){let n="";for(const s of e)s.literal?n+=s.val:n+=t(s.val);return n}const lr={D:Kt,DD:Qt,DDD:en,DDDD:tn,t:nn,tt:sn,ttt:rn,tttt:an,T:on,TT:ln,TTT:cn,TTTT:un,f:hn,ff:fn,fff:gn,ffff:vn,F:dn,FF:mn,FFF:yn,FFFF:wn};class cr{static create(e,t={}){return new cr(e,t)}static parseFormat(e){let t=null,n="",s=!1;const r=[];for(let i=0;i<e.length;i++){const a=e.charAt(i);"'"===a?(n.length>0&&r.push({literal:s||/^\s+$/.test(n),val:n}),t=null,n="",s=!s):s||a===t?n+=a:(n.length>0&&r.push({literal:/^\s+$/.test(n),val:n}),n=a,t=a)}return n.length>0&&r.push({literal:s||/^\s+$/.test(n),val:n}),r}static macroTokenToFormatOpts(e){return lr[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Cs(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),s=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,r=(t,n)=>this.loc.extract(e,t,n),i=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",a=()=>n?function(e){return nr[e.hour<12?0:1]}(e):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),o=(t,s)=>n?function(e,t){return Ks(t)[e.month-1]}(e,t):r(s?{month:t}:{month:t,day:"numeric"},"month"),l=(t,s)=>n?function(e,t){return tr(t)[e.weekday-1]}(e,t):r(s?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=cr.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?function(e,t){return ar(t)[e.year<0?0:1]}(e,t):r({era:t},"era");return or(cr.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return i({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return i({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return i({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return s?r({day:"numeric"},"day"):this.num(e.day);case"dd":return s?r({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return s?r({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?r({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return s?r({month:"numeric"},"month"):this.num(e.month);case"MM":return s?r({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return s?r({year:"numeric"},"year"):this.num(e.year);case"yy":return s?r({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?r({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?r({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=cr.parseFormat(t),r=s.reduce(((e,{literal:t,val:n})=>t?e:e.concat(n)),[]);return or(s,(e=>t=>{const s=n(t);return s?this.num(e.get(s),t.length):t})(e.shiftTo(...r.map(n).filter((e=>e)))))}}const ur=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function hr(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function dr(...e){return t=>e.reduce((([e,n,s],r)=>{const[i,a,o]=r(t,s);return[{...e,...i},a||n,o]}),[{},null,1]).slice(0,2)}function fr(e,...t){if(null==e)return[null,null];for(const[n,s]of t){const t=n.exec(e);if(t)return s(t)}return[null,null]}function mr(...e){return(t,n)=>{const s={};let r;for(r=0;r<e.length;r++)s[e[r]]=$s(t[n+r]);return[s,null,n+r]}}const pr=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,gr=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,yr=RegExp(`${gr.source}${`(?:${pr.source}?(?:\\[(${ur.source})\\])?)?`}`),vr=RegExp(`(?:T${yr.source})?`),wr=mr("weekYear","weekNumber","weekDay"),br=mr("year","ordinal"),kr=RegExp(`${gr.source} ?(?:${pr.source}|(${ur.source}))?`),_r=RegExp(`(?: ${kr.source})?`);function Sr(e,t,n){const s=e[t];return ks(s)?n:$s(s)}function Tr(e,t){return[{hours:Sr(e,t,0),minutes:Sr(e,t+1,0),seconds:Sr(e,t+2,0),milliseconds:Ls(e[t+3])},null,t+4]}function Er(e,t){const n=!e[t]&&!e[t+1],s=qs(e[t+1],e[t+2]);return[{},n?null:qn.instance(s),t+3]}function Ir(e,t){return[{},e[t]?In.create(e[t]):null,t+1]}const Or=RegExp(`^T?${gr.source}$`),xr=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function jr(e){const[t,n,s,r,i,a,o,l,c]=e,u="-"===t[0],h=l&&"-"===l[0],d=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:d(Ps(n)),months:d(Ps(s)),weeks:d(Ps(r)),days:d(Ps(i)),hours:d(Ps(a)),minutes:d(Ps(o)),seconds:d(Ps(l),"-0"===l),milliseconds:d(Ls(c),h)}]}const Cr={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function $r(e,t,n,s,r,i,a){const o={year:2===t.length?Fs($s(t)):$s(t),month:Gs.indexOf(n)+1,day:$s(s),hour:$s(r),minute:$s(i)};return a&&(o.second=$s(a)),e&&(o.weekday=e.length>3?Qs.indexOf(e)+1:Xs.indexOf(e)+1),o}const Pr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Lr(e){const[,t,n,s,r,i,a,o,l,c,u,h]=e,d=$r(t,r,s,n,i,a,o);let f;return f=l?Cr[l]:c?0:qs(u,h),[d,new qn(f)]}const Ar=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Dr=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Nr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Mr(e){const[,t,n,s,r,i,a,o]=e;return[$r(t,r,s,n,i,a,o),qn.utcInstance]}function Rr(e){const[,t,n,s,r,i,a,o]=e;return[$r(t,o,n,s,r,i,a),qn.utcInstance]}const Ur=hr(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,vr),Br=hr(/(\d{4})-?W(\d\d)(?:-?(\d))?/,vr),Fr=hr(/(\d{4})-?(\d{3})/,vr),Vr=hr(yr),qr=dr((function(e,t){return[{year:Sr(e,t),month:Sr(e,t+1,1),day:Sr(e,t+2,1)},null,t+3]}),Tr,Er,Ir),zr=dr(wr,Tr,Er,Ir),Wr=dr(br,Tr,Er,Ir),Jr=dr(Tr,Er,Ir);const Zr=dr(Tr);const Hr=hr(/(\d{4})-(\d\d)-(\d\d)/,_r),Gr=hr(kr),Yr=dr(Tr,Er,Ir);const Kr="Invalid Duration",Qr={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Xr={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...Qr},ei=365.2425,ti=30.436875,ni={years:{quarters:4,months:12,weeks:52.1775,days:ei,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:ti,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...Qr},si=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ri=si.slice(0).reverse();function ii(e,t,n=!1){const s={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new li(s)}function ai(e,t){let n=t.milliseconds??0;for(const s of ri.slice(1))t[s]&&(n+=t[s]*e[s].milliseconds);return n}function oi(e,t){const n=ai(e,t)<0?-1:1;si.reduceRight(((s,r)=>{if(ks(t[r]))return s;if(s){const i=t[s]*n,a=e[r][s],o=Math.floor(i/a);t[r]+=o*n,t[s]-=o*a*n}return r}),null),si.reduce(((n,s)=>{if(ks(t[s]))return n;if(n){const r=t[n]%1;t[n]-=r,t[s]+=r*e[n][s]}return s}),null)}class li{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?ni:Xr;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Fn.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return li.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new Jt("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new li({values:Ws(e,li.normalizeUnit),loc:Fn.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(_s(e))return li.fromMillis(e);if(li.isDuration(e))return e;if("object"==typeof e)return li.fromObject(e);throw new Jt(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return fr(e,[xr,jr])}(e);return n?li.fromObject(n,t):li.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return fr(e,[Or,Zr])}(e);return n?li.fromObject(n,t):li.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Jt("need to specify a reason the Duration is invalid");const n=e instanceof as?e:new as(e,t);if(is.throwOnInvalid)throw new qt(n);return new li({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new Wt(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?cr.create(this.loc,n).formatDurationFromString(this,e):Kr}toHuman(e={}){if(!this.isValid)return Kr;const t=si.map((t=>{const n=this.values[t];return ks(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=As(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1};return ea.fromMillis(t,{zone:"UTC"}).toISOTime(e)}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ai(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=li.fromDurationLike(e),n={};for(const e of si)(Os(t.values,e)||Os(this.values,e))&&(n[e]=t.get(e)+this.get(e));return ii(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=li.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=zs(e(this.values[n],n));return ii(this,{values:t},!0)}get(e){return this[li.normalizeUnit(e)]}set(e){if(!this.isValid)return this;return ii(this,{values:{...this.values,...Ws(e,li.normalizeUnit)}})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:s}={}){return ii(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:s,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return oi(this.matrix,e),ii(this,{values:e},!0)}rescale(){if(!this.isValid)return this;return ii(this,{values:function(e){const t={};for(const[n,s]of Object.entries(e))0!==s&&(t[n]=s);return t}(this.normalize().shiftToAll().toObject())},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>li.normalizeUnit(e)));const t={},n={},s=this.toObject();let r;for(const i of si)if(e.indexOf(i)>=0){r=i;let e=0;for(const t in n)e+=this.matrix[t][i]*n[t],n[t]=0;_s(s[i])&&(e+=s[i]);const a=Math.trunc(e);t[i]=a,n[i]=(1e3*e-1e3*a)/1e3}else _s(s[i])&&(n[i]=s[i]);for(const e in n)0!==n[e]&&(t[r]+=e===r?n[e]:n[e]/this.matrix[r][e]);return oi(this.matrix,t),ii(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return ii(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const s of si)if(t=this.values[s],n=e.values[s],!(void 0===t||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}}const ci="Invalid Interval";class ui{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Jt("need to specify a reason the Interval is invalid");const n=e instanceof as?e:new as(e,t);if(is.throwOnInvalid)throw new Vt(n);return new ui({invalid:n})}static fromDateTimes(e,t){const n=ta(e),s=ta(t),r=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?ui.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:ui.invalid("missing or invalid end"):ui.invalid("missing or invalid start")}(n,s);return null==r?new ui({start:n,end:s}):r}static after(e,t){const n=li.fromDurationLike(t),s=ta(e);return ui.fromDateTimes(s,s.plus(n))}static before(e,t){const n=li.fromDurationLike(t),s=ta(e);return ui.fromDateTimes(s.minus(n),s)}static fromISO(e,t){const[n,s]=(e||"").split("/",2);if(n&&s){let e,r,i,a;try{e=ea.fromISO(n,t),r=e.isValid}catch(s){r=!1}try{i=ea.fromISO(s,t),a=i.isValid}catch(s){a=!1}if(r&&a)return ui.fromDateTimes(e,i);if(r){const n=li.fromISO(s,t);if(n.isValid)return ui.after(e,n)}else if(a){const e=li.fromISO(n,t);if(e.isValid)return ui.before(i,e)}}return ui.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let s;return s=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,s=s.startOf(e,t),Math.floor(s.diff(n,e).get(e))+(s.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?ui.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(ta).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),n=[];let{s}=this,r=0;for(;s<this.e;){const e=t[r]||this.e,i=+e>+this.e?this.e:e;n.push(ui.fromDateTimes(s,i)),s=i,r+=1}return n}splitBy(e){const t=li.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s}=this,r=1;const i=[];for(;s<this.e;){const e=this.start.plus(t.mapUnits((e=>e*r)));n=+e>+this.e?this.e:e,i.push(ui.fromDateTimes(s,n)),s=n,r+=1}return i}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:ui.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return ui.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n]),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const s=[],r=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),i=Array.prototype.concat(...r).sort(((e,t)=>e.time-t.time));for(const e of i)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&s.push(ui.fromDateTimes(t,e.time)),t=null);return ui.merge(s)}difference(...e){return ui.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ci}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Kt,t={}){return this.isValid?cr.create(this.s.loc.clone(t),e).formatInterval(this):ci}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:ci}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ci}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:ci}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:ci}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):li.invalid(this.invalidReason)}mapEndpoints(e){return ui.fromDateTimes(e(this.s),e(this.e))}}class hi{static hasDST(e=is.defaultZone){const t=ea.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return In.isValidZone(e)}static normalizeZone(e){return Wn(e,is.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Fn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Fn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Fn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||Fn.create(t,n,r)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||Fn.create(t,n,r)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null}={}){return(s||Fn.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:s=null}={}){return(s||Fn.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Fn.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Fn.create(t,null,"gregory").eras(e)}static features(){return{relative:Ts(),localeWeek:Es()}}}function di(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=n(t)-n(e);return Math.floor(li.fromMillis(s).as("days"))}function fi(e,t,n,s){let[r,i,a,o]=function(e,t,n){const s=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=di(e,t);return(n-n%7)/7}],["days",di]],r={},i=e;let a,o;for(const[l,c]of s)n.indexOf(l)>=0&&(a=l,r[l]=c(e,t),o=i.plus(r),o>t?(r[l]--,(e=i.plus(r))>t&&(o=e,r[l]--,e=i.plus(r))):e=o);return[e,r,o,a]}(e,t,n);const l=t-r,c=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(a<t&&(a=r.plus({[o]:1})),a!==r&&(i[o]=(i[o]||0)+l/(a-r)));const u=li.fromObject(i,s);return c.length>0?li.fromMillis(l,s).shiftTo(...c).plus(u):u}function mi(e,t=e=>e){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);if(-1!==e[n].search(Jn.hanidec))t+=Hn.indexOf(e[n]);else for(const e in Zn){const[n,r]=Zn[e];s>=n&&s<=r&&(t+=s-n)}}return parseInt(t,10)}return t}(e))}}const pi=`[ ${String.fromCharCode(160)}]`,gi=new RegExp(pi,"g");function yi(e){return e.replace(/\./g,"\\.?").replace(gi,pi)}function vi(e){return e.replace(/\./g,"").replace(gi," ").toLowerCase()}function wi(e,t){return null===e?null:{regex:RegExp(e.map(yi).join("|")),deser:([n])=>e.findIndex((e=>vi(n)===vi(e)))+t}}function bi(e,t){return{regex:e,deser:([,e,t])=>qs(e,t),groups:t}}function ki(e){return{regex:e,deser:([e])=>e}}const _i={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Si=null;function Ti(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=Oi(cr.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}class Ei{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=Ti(cr.parseFormat(t),e),this.units=this.tokens.map((t=>function(e,t){const n=Yn(t),s=Yn(t,"{2}"),r=Yn(t,"{3}"),i=Yn(t,"{4}"),a=Yn(t,"{6}"),o=Yn(t,"{1,2}"),l=Yn(t,"{1,3}"),c=Yn(t,"{1,6}"),u=Yn(t,"{1,9}"),h=Yn(t,"{2,4}"),d=Yn(t,"{4,6}"),f=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},m=(m=>{if(e.literal)return f(m);switch(m.val){case"G":return wi(t.eras("short"),0);case"GG":return wi(t.eras("long"),0);case"y":return mi(c);case"yy":case"kk":return mi(h,Fs);case"yyyy":case"kkkk":return mi(i);case"yyyyy":return mi(d);case"yyyyyy":return mi(a);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return mi(o);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return mi(s);case"MMM":return wi(t.months("short",!0),1);case"MMMM":return wi(t.months("long",!0),1);case"LLL":return wi(t.months("short",!1),1);case"LLLL":return wi(t.months("long",!1),1);case"o":case"S":return mi(l);case"ooo":case"SSS":return mi(r);case"u":return ki(u);case"uu":return ki(o);case"uuu":case"E":case"c":return mi(n);case"a":return wi(t.meridiems(),0);case"EEE":return wi(t.weekdays("short",!1),1);case"EEEE":return wi(t.weekdays("long",!1),1);case"ccc":return wi(t.weekdays("short",!0),1);case"cccc":return wi(t.weekdays("long",!0),1);case"Z":case"ZZ":return bi(new RegExp(`([+-]${o.source})(?::(${s.source}))?`),2);case"ZZZ":return bi(new RegExp(`([+-]${o.source})(${s.source})?`),2);case"z":return ki(/[a-z_+-/]{1,256}?/i);case" ":return ki(/[^\S\n\r]/);default:return f(m)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return m.token=e,m}(t,e))),this.disqualifyingUnit=this.units.find((e=>e.invalidReason)),!this.disqualifyingUnit){const[e,t]=[`^${(n=this.units).map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,n];this.regex=RegExp(e,"i"),this.handlers=t}var n}explainFromTokens(e){if(this.isValid){const[t,n]=function(e,t,n){const s=e.match(t);if(s){const e={};let t=1;for(const r in n)if(Os(n,r)){const i=n[r],a=i.groups?i.groups+1:1;!i.literal&&i.token&&(e[i.token.val[0]]=i.deser(s.slice(t,t+a))),t+=a}return[s,e]}return[s,{}]}(e,this.regex,this.handlers),[s,r,i]=n?function(e){let t,n=null;return ks(e.z)||(n=In.create(e.z)),ks(e.Z)||(n||(n=new qn(e.Z)),t=e.Z),ks(e.q)||(e.M=3*(e.q-1)+1),ks(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),ks(e.u)||(e.S=Ls(e.u)),[Object.keys(e).reduce(((t,n)=>{const s=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return s&&(t[s]=e[n]),t}),{}),n,t]}(n):[null,null,void 0];if(Os(n,"a")&&Os(n,"H"))throw new zt("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:s,zone:r,specificOffset:i}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Ii(e,t,n){return new Ei(e,n).explainFromTokens(t)}function Oi(e,t){if(!e)return null;const n=cr.create(t,e).dtFormatter((Si||(Si=ea.fromMillis(1555555555555)),Si)),s=n.formatToParts(),r=n.resolvedOptions();return s.map((t=>function(e,t,n){const{type:s,value:r}=e;if("literal"===s){const e=/^\s+$/.test(r);return{literal:!e,val:e?" ":r}}const i=t[s];let a=s;"hour"===s&&(a=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let o=_i[a];if("object"==typeof o&&(o=o[i]),o)return{literal:!1,val:o}}(t,e,r)))}const xi="Invalid DateTime",ji=864e13;function Ci(e){return new as("unsupported zone",`the zone "${e.name}" is not supported`)}function $i(e){return null===e.weekData&&(e.weekData=ms(e.c)),e.weekData}function Pi(e){return null===e.localWeekData&&(e.localWeekData=ms(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Li(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ea({...n,...t,old:n})}function Ai(e,t,n){let s=e-60*t*1e3;const r=n.offset(s);if(t===r)return[s,t];s-=60*(r-t)*1e3;const i=n.offset(s);return r===i?[s,r]:[e-60*Math.min(r,i)*1e3,Math.max(r,i)]}function Di(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Ni(e,t,n){return Ai(Rs(e),t,n)}function Mi(e,t){const n=e.o,s=e.c.year+Math.trunc(t.years),r=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),i={...e.c,year:s,month:r,day:Math.min(e.c.day,Ms(s,r))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},a=li.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),o=Rs(i);let[l,c]=Ai(o,n,e.zone);return 0!==a&&(l+=a,c=e.zone.offset(l)),{ts:l,o:c}}function Ri(e,t,n,s,r,i){const{setZone:a,zone:o}=n;if(e&&0!==Object.keys(e).length||t){const s=t||o,r=ea.fromObject(e,{...n,zone:s,specificOffset:i});return a?r:r.setZone(o)}return ea.invalid(new as("unparsable",`the input "${r}" can't be parsed as ${s}`))}function Ui(e,t,n=!0){return e.isValid?cr.create(Fn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Bi(e,t){const n=e.c.year>9999||e.c.year<0;let s="";return n&&e.c.year>=0&&(s+="+"),s+=Cs(e.c.year,n?6:4),t?(s+="-",s+=Cs(e.c.month),s+="-",s+=Cs(e.c.day)):(s+=Cs(e.c.month),s+=Cs(e.c.day)),s}function Fi(e,t,n,s,r,i){let a=Cs(e.c.hour);return t?(a+=":",a+=Cs(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(a+=":")):a+=Cs(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(a+=Cs(e.c.second),0===e.c.millisecond&&s||(a+=".",a+=Cs(e.c.millisecond,3))),r&&(e.isOffsetFixed&&0===e.offset&&!i?a+="Z":e.o<0?(a+="-",a+=Cs(Math.trunc(-e.o/60)),a+=":",a+=Cs(Math.trunc(-e.o%60))):(a+="+",a+=Cs(Math.trunc(e.o/60)),a+=":",a+=Cs(Math.trunc(e.o%60)))),i&&(a+="["+e.zone.ianaName+"]"),a}const Vi={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},qi={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},zi={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Wi=["year","month","day","hour","minute","second","millisecond"],Ji=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Zi=["year","ordinal","hour","minute","second","millisecond"];function Hi(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new Wt(e);return t}(e)}}function Gi(e,t){const n=Wn(t.zone,is.defaultZone);if(!n.isValid)return ea.invalid(Ci(n));const s=Fn.fromObject(t);let r,i;if(ks(e.year))r=is.now();else{for(const t of Wi)ks(e[t])&&(e[t]=Vi[t]);const t=ws(e)||bs(e);if(t)return ea.invalid(t);const s=function(e){if(void 0===Qi&&(Qi=is.now()),"iana"!==e.type)return e.offset(Qi);const t=e.name;let n=Xi.get(t);return void 0===n&&(n=e.offset(Qi),Xi.set(t,n)),n}(n);[r,i]=Ni(e,s,n)}return new ea({ts:r,zone:n,loc:s,o:i})}function Yi(e,t,n){const s=!!ks(n.round)||n.round,r=(e,r)=>{e=As(e,s||n.calendary?0:2,!0);return t.loc.clone(n).relFormatter(n).format(e,r)},i=s=>n.calendary?t.hasSame(e,s)?0:t.startOf(s).diff(e.startOf(s),s).get(s):t.diff(e,s).get(s);if(n.unit)return r(i(n.unit),n.unit);for(const e of n.units){const t=i(e);if(Math.abs(t)>=1)return r(t,e)}return r(e>t?-0:0,n.units[n.units.length-1])}function Ki(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}let Qi;const Xi=new Map;class ea{constructor(e){const t=e.zone||is.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new as("invalid input"):null)||(t.isValid?null:Ci(t));this.ts=ks(e.ts)?is.now():e.ts;let s=null,r=null;if(!n){if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[s,r]=[e.old.c,e.old.o];else{const i=_s(e.o)&&!e.old?e.o:t.offset(this.ts);s=Di(this.ts,i),n=Number.isNaN(s.year)?new as("invalid input"):null,s=n?null:s,r=n?null:i}}this._zone=t,this.loc=e.loc||Fn.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=s,this.o=r,this.isLuxonDateTime=!0}static now(){return new ea({})}static local(){const[e,t]=Ki(arguments),[n,s,r,i,a,o,l]=t;return Gi({year:n,month:s,day:r,hour:i,minute:a,second:o,millisecond:l},e)}static utc(){const[e,t]=Ki(arguments),[n,s,r,i,a,o,l]=t;return e.zone=qn.utcInstance,Gi({year:n,month:s,day:r,hour:i,minute:a,second:o,millisecond:l},e)}static fromJSDate(e,t={}){const n=(s=e,"[object Date]"===Object.prototype.toString.call(s)?e.valueOf():NaN);var s;if(Number.isNaN(n))return ea.invalid("invalid input");const r=Wn(t.zone,is.defaultZone);return r.isValid?new ea({ts:n,zone:r,loc:Fn.fromObject(t)}):ea.invalid(Ci(r))}static fromMillis(e,t={}){if(_s(e))return e<-ji||e>ji?ea.invalid("Timestamp out of range"):new ea({ts:e,zone:Wn(t.zone,is.defaultZone),loc:Fn.fromObject(t)});throw new Jt(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(_s(e))return new ea({ts:1e3*e,zone:Wn(t.zone,is.defaultZone),loc:Fn.fromObject(t)});throw new Jt("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=Wn(t.zone,is.defaultZone);if(!n.isValid)return ea.invalid(Ci(n));const s=Fn.fromObject(t),r=Ws(e,Hi),{minDaysInFirstWeek:i,startOfWeek:a}=vs(r,s),o=is.now(),l=ks(t.specificOffset)?n.offset(o):t.specificOffset,c=!ks(r.ordinal),u=!ks(r.year),h=!ks(r.month)||!ks(r.day),d=u||h,f=r.weekYear||r.weekNumber;if((d||c)&&f)throw new zt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&c)throw new zt("Can't mix ordinal dates with month/day");const m=f||r.weekday&&!d;let p,g,y=Di(o,l);m?(p=Ji,g=qi,y=ms(y,i,a)):c?(p=Zi,g=zi,y=gs(y)):(p=Wi,g=Vi);let v=!1;for(const e of p){ks(r[e])?r[e]=v?g[e]:y[e]:v=!0}const w=m?function(e,t=4,n=1){const s=Ss(e.weekYear),r=js(e.weekNumber,1,Bs(e.weekYear,t,n)),i=js(e.weekday,1,7);return s?r?!i&&cs("weekday",e.weekday):cs("week",e.weekNumber):cs("weekYear",e.weekYear)}(r,i,a):c?function(e){const t=Ss(e.year),n=js(e.ordinal,1,Ns(e.year));return t?!n&&cs("ordinal",e.ordinal):cs("year",e.year)}(r):ws(r),b=w||bs(r);if(b)return ea.invalid(b);const k=m?ps(r,i,a):c?ys(r):r,[_,S]=Ni(k,l,n),T=new ea({ts:_,zone:n,o:S,loc:s});return r.weekday&&d&&e.weekday!==T.weekday?ea.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${T.toISO()}`):T.isValid?T:ea.invalid(T.invalid)}static fromISO(e,t={}){const[n,s]=function(e){return fr(e,[Ur,qr],[Br,zr],[Fr,Wr],[Vr,Jr])}(e);return Ri(n,s,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,s]=function(e){return fr(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Pr,Lr])}(e);return Ri(n,s,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,s]=function(e){return fr(e,[Ar,Mr],[Dr,Mr],[Nr,Rr])}(e);return Ri(n,s,t,"HTTP",t)}static fromFormat(e,t,n={}){if(ks(e)||ks(t))throw new Jt("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:r=null}=n,i=Fn.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0}),[a,o,l,c]=function(e,t,n){const{result:s,zone:r,specificOffset:i,invalidReason:a}=Ii(e,t,n);return[s,r,i,a]}(i,e,t);return c?ea.invalid(c):Ri(a,o,n,`format ${t}`,e,l)}static fromString(e,t,n={}){return ea.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,s]=function(e){return fr(e,[Hr,qr],[Gr,Yr])}(e);return Ri(n,s,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Jt("need to specify a reason the DateTime is invalid");const n=e instanceof as?e:new as(e,t);if(is.throwOnInvalid)throw new Ft(n);return new ea({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=Oi(e,Fn.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){return Ti(cr.parseFormat(e),Fn.fromObject(t)).map((e=>e.val)).join("")}static resetCache(){Qi=void 0,Xi.clear()}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?$i(this).weekYear:NaN}get weekNumber(){return this.isValid?$i(this).weekNumber:NaN}get weekday(){return this.isValid?$i(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Pi(this).weekday:NaN}get localWeekNumber(){return this.isValid?Pi(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Pi(this).weekYear:NaN}get ordinal(){return this.isValid?gs(this.c).ordinal:NaN}get monthShort(){return this.isValid?hi.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?hi.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?hi.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?hi.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=Rs(this.c),s=this.zone.offset(n-e),r=this.zone.offset(n+e),i=this.zone.offset(n-s*t),a=this.zone.offset(n-r*t);if(i===a)return[this];const o=n-i*t,l=n-a*t,c=Di(o,i),u=Di(l,a);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[Li(this,{ts:o}),Li(this,{ts:l})]:[this]}get isInLeapYear(){return Ds(this.year)}get daysInMonth(){return Ms(this.year,this.month)}get daysInYear(){return this.isValid?Ns(this.year):NaN}get weeksInWeekYear(){return this.isValid?Bs(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Bs(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:s}=cr.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:s}}toUTC(e=0,t={}){return this.setZone(qn.instance(e),t)}toLocal(){return this.setZone(is.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if((e=Wn(e,is.defaultZone)).equals(this.zone))return this;if(e.isValid){let s=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[s]=Ni(n,t,e)}return Li(this,{ts:s,zone:e})}return ea.invalid(Ci(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return Li(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=Ws(e,Hi),{minDaysInFirstWeek:n,startOfWeek:s}=vs(t,this.loc),r=!ks(t.weekYear)||!ks(t.weekNumber)||!ks(t.weekday),i=!ks(t.ordinal),a=!ks(t.year),o=!ks(t.month)||!ks(t.day),l=a||o,c=t.weekYear||t.weekNumber;if((l||i)&&c)throw new zt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&i)throw new zt("Can't mix ordinal dates with month/day");let u;r?u=ps({...ms(this.c,n,s),...t},n,s):ks(t.ordinal)?(u={...this.toObject(),...t},ks(t.day)&&(u.day=Math.min(Ms(u.year,u.month),u.day))):u=ys({...gs(this.c),...t});const[h,d]=Ni(u,this.o,this.zone);return Li(this,{ts:h,o:d})}plus(e){if(!this.isValid)return this;return Li(this,Mi(this,li.fromDurationLike(e)))}minus(e){if(!this.isValid)return this;return Li(this,Mi(this,li.fromDurationLike(e).negate()))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},s=li.normalizeUnit(e);switch(s){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===s)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===s){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?cr.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):xi}toLocaleString(e=Kt,t={}){return this.isValid?cr.create(this.loc.clone(t),e).formatDateTime(this):xi}toLocaleParts(e={}){return this.isValid?cr.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:s=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const i="extended"===e;let a=Bi(this,i);return a+="T",a+=Fi(this,i,t,n,s,r),a}toISODate({format:e="extended"}={}){return this.isValid?Bi(this,"extended"===e):null}toISOWeekDate(){return Ui(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:s=!1,extendedZone:r=!1,format:i="extended"}={}){if(!this.isValid)return null;return(s?"T":"")+Fi(this,"extended"===i,t,e,n,r)}toRFC2822(){return Ui(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ui(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Bi(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let s="HH:mm:ss.SSS";return(t||e)&&(n&&(s+=" "),t?s+="z":e&&(s+="ZZ")),Ui(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():xi}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return li.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...n},r=(o=t,Array.isArray(o)?o:[o]).map(li.normalizeUnit),i=e.valueOf()>this.valueOf(),a=fi(i?this:e,i?e:this,r,s);var o;return i?a.negate():a}diffNow(e="milliseconds",t={}){return this.diff(ea.now(),e,t)}until(e){return this.isValid?ui.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const s=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(t,n)<=s&&s<=r.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||ea.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],r=e.unit;return Array.isArray(e.unit)&&(s=e.unit,r=void 0),Yi(t,this.plus(n),{...e,numeric:"always",units:s,unit:r})}toRelativeCalendar(e={}){return this.isValid?Yi(e.base||ea.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ea.isDateTime))throw new Jt("min requires all arguments be DateTimes");return Is(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(ea.isDateTime))throw new Jt("max requires all arguments be DateTimes");return Is(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:s=null,numberingSystem:r=null}=n;return Ii(Fn.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return ea.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:s=null}=t,r=Fn.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return new Ei(r,e)}static fromFormatParser(e,t,n={}){if(ks(e)||ks(t))throw new Jt("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:r=null}=n,i=Fn.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});if(!i.equals(t.locale))throw new Jt(`fromFormatParser called with a locale of ${i}, but the format parser was created for ${t.locale}`);const{result:a,zone:o,specificOffset:l,invalidReason:c}=t.explainFromTokens(e);return c?ea.invalid(c):Ri(a,o,n,`format ${t.format}`,e,l)}static get DATE_SHORT(){return Kt}static get DATE_MED(){return Qt}static get DATE_MED_WITH_WEEKDAY(){return Xt}static get DATE_FULL(){return en}static get DATE_HUGE(){return tn}static get TIME_SIMPLE(){return nn}static get TIME_WITH_SECONDS(){return sn}static get TIME_WITH_SHORT_OFFSET(){return rn}static get TIME_WITH_LONG_OFFSET(){return an}static get TIME_24_SIMPLE(){return on}static get TIME_24_WITH_SECONDS(){return ln}static get TIME_24_WITH_SHORT_OFFSET(){return cn}static get TIME_24_WITH_LONG_OFFSET(){return un}static get DATETIME_SHORT(){return hn}static get DATETIME_SHORT_WITH_SECONDS(){return dn}static get DATETIME_MED(){return fn}static get DATETIME_MED_WITH_SECONDS(){return mn}static get DATETIME_MED_WITH_WEEKDAY(){return pn}static get DATETIME_FULL(){return gn}static get DATETIME_FULL_WITH_SECONDS(){return yn}static get DATETIME_HUGE(){return vn}static get DATETIME_HUGE_WITH_SECONDS(){return wn}}function ta(e){if(ea.isDateTime(e))return e;if(e&&e.valueOf&&_s(e.valueOf()))return ea.fromJSDate(e);if(e&&"object"==typeof e)return ea.fromObject(e);throw new Jt(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const na={render:async()=>'\n      <link rel="stylesheet" href="style.css">\n      <div class="login-container">\n        <h2>Login</h2>\n        <form id="login-form">\n          <div class="form-group">\n            <label for="username">USERNAME</label>\n            <div class="input-icon2">\n              <input type="text" id="username" placeholder="ENTER USERNAME" required>\n            </div>\n          </div>\n          <div class="form-group">\n            <label for="password">PASSWORD</label>\n            <div class="input-icon">\n              <input type="password" id="password" placeholder="ENTER PASSWORD" required>\n            </div>\n          </div>\n          <button type="submit" class="login-btn">LOGIN</button>\n        </form>\n\n        <div class="popup popup-success" id="popup-success">\n          <p id="popup-message"></p>\n          <button id="close-success-popup">Tutup</button>\n        </div>\n\n        <div class="popup popup-error" id="popup-error">\n          <p id="popup-message-error"></p>\n          <button id="close-error-popup">Tutup</button>\n        </div>\n      </div>\n    ',async afterRender(){document.body.classList.add("login-page");const e=document.getElementById("login-form");e&&e.addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("username")?.value.trim(),n=document.getElementById("password")?.value;if(!t||!n)return void this.showPopup("error","Harap isi semua kolom!");const{data:s,error:r}=await Ut.from("admin").select("id, username").match({username:t,password:n}).single();if(r||!s)return void this.showPopup("error","Login gagal: Username atau password salah.");const{data:i,error:a}=await Ut.from("admin").select("current_login, last_login").eq("id",s.id).single();if(a||!i)return void this.showPopup("error","Gagal mengambil data login sebelumnya.");const o=ea.now().setZone("Asia/Jakarta").toISO();await Ut.from("admin").update({last_login:i.current_login||i.last_login||o,current_login:o}).eq("id",s.id),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("username",s.username.toLowerCase()),this.showPopup("success",`Login sukses! Selamat datang, ${s.username}`),setTimeout((()=>{window.location.hash="/dashboard"}),2e3)})),document.getElementById("close-success-popup")?.addEventListener("click",(()=>this.closePopup())),document.getElementById("close-error-popup")?.addEventListener("click",(()=>this.closePopup()))},showPopup(e,t){const n="error"===e?"popup-error":"popup-success",s="error"===e?"popup-message-error":"popup-message",r=document.getElementById(s),i=document.getElementById(n);r&&i&&(r.textContent=t,i.classList.add("show"))},closePopup(){document.getElementById("popup-success")?.classList.remove("show"),document.getElementById("popup-error")?.classList.remove("show")}},sa=na,ra={async render(){if("true"!==localStorage.getItem("isLoggedIn"))return void(window.location.hash="/login");const{data:e,error:t}=await Ut.from("employees").select("*");return`\n      <link rel="stylesheet" href="../public/styles/style.css">\n      <div class="d-flex">\n\n        \x3c!-- Main Content --\x3e\n        <main id="mainContent" class="content flex-grow-1 p-4" style="font-family: 'Nunito', sans-serif;">\n          <h2>Dashboard</h2>\n\n          <div class="dashboard-cards">\n            <div class="card total-karyawan">\n              <p class="card-title">TOTAL KARYAWAN</p>\n              <div class="card-content">\n                <span class="card-number">${e?e.length:0}</span>\n                <i class="bi bi-person fs-2"></i>\n              </div>\n            </div>\n\n            <div class="card absensi-hari-ini">\n              <p class="card-title">ABSENSI HARI INI</p>\n              <div class="card-content">\n                <span class="card-number">0</span>\n                <i class="bi bi-calendar-event fs-2"></i>\n              </div>\n            </div>\n          </div>\n\n          <h5>Manajemen Jadwal</h5>\n          <div class="card jadwal-masuk">\n            <div class="card-content">\n              <div>\n                <div class="card-title">Jadwal Masuk</div>\n                <input type="time" id="jamMasuk" />\n                <p id="jamMasukDisplay">Jam Masuk: ${localStorage.getItem("jamMasuk")||"08:00"}</p>\n              </div>\n            </div>\n          </div>\n\n          <div class="card jadwal-pulang">\n            <div class="card-content">\n              <div>\n                <div class="card-title">Jadwal Pulang</div>\n                <input type="time" id="jamPulang" />\n                <p id="jamPulangDisplay">Jam Pulang: ${localStorage.getItem("jamPulang")||"17:00"}</p>\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n    `},async afterRender(){document.body.classList.remove("login-page");const e=document.getElementById("jamMasuk"),t=document.getElementById("jamPulang"),n=document.getElementById("jamMasukDisplay"),s=document.getElementById("jamPulangDisplay");e.value=localStorage.getItem("jamMasuk")||"08:00",t.value=localStorage.getItem("jamPulang")||"17:00",n.textContent=`Jam Masuk: ${e.value}`,s.textContent=`Jam Pulang: ${t.value}`,e.addEventListener("change",(()=>{localStorage.setItem("jamMasuk",e.value),n.textContent=`Jam Masuk: ${e.value}`})),t.addEventListener("change",(()=>{localStorage.setItem("jamPulang",t.value),s.textContent=`Jam Pulang: ${t.value}`}));await(async()=>{const e=(new Date).toISOString().split("T")[0],{data:t,error:n}=await Ut.from("attendance").select("*").eq("date",e);if(n)return void console.error("Gagal mengambil absensi hari ini:",n.message);const s=t.length,r=document.querySelector(".absensi-hari-ini .card-number");r&&(r.textContent=s)})()}};document.addEventListener("DOMContentLoaded",(async()=>{const e=document.getElementById("main");e&&(e.innerHTML=await ra.render(),await ra.afterRender())}));const ia=ra;var aa=a(206),oa=null;function la(e,t){if("number"!=typeof(e=e||ba))throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2b$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(ya(function(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return aa.randomBytes(e)}catch{}if(!oa)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return oa(e)}(wa),wa)),n.join("")}function ca(e,t,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e&&(n=e,e=void 0),void 0===e)e=ba;else if("number"!=typeof e)throw Error("illegal arguments: "+typeof e);function s(t){fa((function(){try{t(null,la(e))}catch(e){t(e)}}))}if(!n)return new Promise((function(e,t){s((function(n,s){n?t(n):e(s)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);s(n)}function ua(e,t){if(void 0===t&&(t=ba),"number"==typeof t&&(t=la(t)),"string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return Ca(e,t)}function ha(e,t,n,s){function r(n){"string"==typeof e&&"number"==typeof t?ca(t,(function(t,r){Ca(e,r,n,s)})):"string"==typeof e&&"string"==typeof t?Ca(e,t,n,s):fa(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){r((function(n,s){n?t(n):e(s)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);r(n)}function da(e,t){for(var n=e.length^t.length,s=0;s<e.length;++s)n|=e.charCodeAt(s)^t.charCodeAt(s);return 0===n}var fa="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?"function"==typeof setImmediate?setImmediate:process.nextTick:setTimeout;function ma(e){for(var t=0,n=0,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(s+1))?(++s,t+=4):t+=3;return t}var pa="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ga=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function ya(e,t){var n,s,r=0,i=[];if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;r<t;){if(n=255&e[r++],i.push(pa[n>>2&63]),n=(3&n)<<4,r>=t){i.push(pa[63&n]);break}if(n|=(s=255&e[r++])>>4&15,i.push(pa[63&n]),n=(15&s)<<2,r>=t){i.push(pa[63&n]);break}n|=(s=255&e[r++])>>6&3,i.push(pa[63&n]),i.push(pa[63&s])}return i.join("")}function va(e,t){var n,s,r,i,a,o=0,l=e.length,c=0,u=[];if(t<=0)throw Error("Illegal len: "+t);for(;o<l-1&&c<t&&(n=(a=e.charCodeAt(o++))<ga.length?ga[a]:-1,s=(a=e.charCodeAt(o++))<ga.length?ga[a]:-1,-1!=n&&-1!=s)&&(i=n<<2>>>0,i|=(48&s)>>4,u.push(String.fromCharCode(i)),!(++c>=t||o>=l))&&-1!=(r=(a=e.charCodeAt(o++))<ga.length?ga[a]:-1)&&(i=(15&s)<<4>>>0,i|=(60&r)>>2,u.push(String.fromCharCode(i)),!(++c>=t||o>=l));)i=(3&r)<<6>>>0,i|=(a=e.charCodeAt(o++))<ga.length?ga[a]:-1,u.push(String.fromCharCode(i)),++c;var h=[];for(o=0;o<c;o++)h.push(u[o].charCodeAt(0));return h}var wa=16,ba=10,ka=16,_a=100,Sa=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Ta=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Ea=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Ia(e,t,n,s){var r,i=e[t],a=e[t+1];return r=s[(i^=n[0])>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r=s[(a^=(r+=s[768|255&i])^n[1])>>>24],r+=s[256|a>>16&255],r^=s[512|a>>8&255],r=s[(i^=(r+=s[768|255&a])^n[2])>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r=s[(a^=(r+=s[768|255&i])^n[3])>>>24],r+=s[256|a>>16&255],r^=s[512|a>>8&255],r=s[(i^=(r+=s[768|255&a])^n[4])>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r=s[(a^=(r+=s[768|255&i])^n[5])>>>24],r+=s[256|a>>16&255],r^=s[512|a>>8&255],r=s[(i^=(r+=s[768|255&a])^n[6])>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r=s[(a^=(r+=s[768|255&i])^n[7])>>>24],r+=s[256|a>>16&255],r^=s[512|a>>8&255],r=s[(i^=(r+=s[768|255&a])^n[8])>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r=s[(a^=(r+=s[768|255&i])^n[9])>>>24],r+=s[256|a>>16&255],r^=s[512|a>>8&255],r=s[(i^=(r+=s[768|255&a])^n[10])>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r=s[(a^=(r+=s[768|255&i])^n[11])>>>24],r+=s[256|a>>16&255],r^=s[512|a>>8&255],r=s[(i^=(r+=s[768|255&a])^n[12])>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r=s[(a^=(r+=s[768|255&i])^n[13])>>>24],r+=s[256|a>>16&255],r^=s[512|a>>8&255],r=s[(i^=(r+=s[768|255&a])^n[14])>>>24],r+=s[256|i>>16&255],r^=s[512|i>>8&255],r=s[(a^=(r+=s[768|255&i])^n[15])>>>24],r+=s[256|a>>16&255],r^=s[512|a>>8&255],i^=(r+=s[768|255&a])^n[16],e[t]=a^n[ka+1],e[t+1]=i,e}function Oa(e,t){for(var n=0,s=0;n<4;++n)s=s<<8|255&e[t],t=(t+1)%e.length;return{key:s,offp:t}}function xa(e,t,n){for(var s,r=0,i=[0,0],a=t.length,o=n.length,l=0;l<a;l++)r=(s=Oa(e,r)).offp,t[l]=t[l]^s.key;for(l=0;l<a;l+=2)i=Ia(i,0,t,n),t[l]=i[0],t[l+1]=i[1];for(l=0;l<o;l+=2)i=Ia(i,0,t,n),n[l]=i[0],n[l+1]=i[1]}function ja(e,t,n,s,r){var i,a=Ea.slice(),o=a.length;if(n<4||n>31){if(i=Error("Illegal number of rounds (4-31): "+n),s)return void fa(s.bind(this,i));throw i}if(t.length!==wa){if(i=Error("Illegal salt length: "+t.length+" != "+wa),s)return void fa(s.bind(this,i));throw i}n=1<<n>>>0;var l,c,u,h=0;function d(){if(r&&r(h/n),!(h<n)){for(h=0;h<64;h++)for(u=0;u<o>>1;u++)Ia(a,u<<1,l,c);var i=[];for(h=0;h<o;h++)i.push((a[h]>>24&255)>>>0),i.push((a[h]>>16&255)>>>0),i.push((a[h]>>8&255)>>>0),i.push((255&a[h])>>>0);return s?void s(null,i):i}for(var f=Date.now();h<n&&(h+=1,xa(e,l,c),xa(t,l,c),!(Date.now()-f>_a)););s&&fa(d)}if("function"==typeof Int32Array?(l=new Int32Array(Sa),c=new Int32Array(Ta)):(l=Sa.slice(),c=Ta.slice()),function(e,t,n,s){for(var r,i=0,a=[0,0],o=n.length,l=s.length,c=0;c<o;c++)i=(r=Oa(t,i)).offp,n[c]=n[c]^r.key;for(i=0,c=0;c<o;c+=2)i=(r=Oa(e,i)).offp,a[0]^=r.key,i=(r=Oa(e,i)).offp,a[1]^=r.key,a=Ia(a,0,n,s),n[c]=a[0],n[c+1]=a[1];for(c=0;c<l;c+=2)i=(r=Oa(e,i)).offp,a[0]^=r.key,i=(r=Oa(e,i)).offp,a[1]^=r.key,a=Ia(a,0,n,s),s[c]=a[0],s[c+1]=a[1]}(t,e,l,c),void 0!==s)d();else for(var f;;)if(void 0!==(f=d()))return f||[]}function Ca(e,t,n,s){var r,i,a;if("string"!=typeof e||"string"!=typeof t){if(r=Error("Invalid string / salt: Not a string"),n)return void fa(n.bind(this,r));throw r}if("$"!==t.charAt(0)||"2"!==t.charAt(1)){if(r=Error("Invalid salt version: "+t.substring(0,2)),n)return void fa(n.bind(this,r));throw r}if("$"===t.charAt(2))i=String.fromCharCode(0),a=3;else{if("a"!==(i=t.charAt(2))&&"b"!==i&&"y"!==i||"$"!==t.charAt(3)){if(r=Error("Invalid salt revision: "+t.substring(2,4)),n)return void fa(n.bind(this,r));throw r}a=4}if(t.charAt(a+2)>"$"){if(r=Error("Missing salt rounds"),n)return void fa(n.bind(this,r));throw r}var o=10*parseInt(t.substring(a,a+1),10)+parseInt(t.substring(a+1,a+2),10),l=t.substring(a+3,a+25),c=function(e){for(var t,n,s=0,r=new Array(ma(e)),i=0,a=e.length;i<a;++i)(t=e.charCodeAt(i))<128?r[s++]=t:t<2048?(r[s++]=t>>6|192,r[s++]=63&t|128):55296==(64512&t)&&56320==(64512&(n=e.charCodeAt(i+1)))?(t=65536+((1023&t)<<10)+(1023&n),++i,r[s++]=t>>18|240,r[s++]=t>>12&63|128,r[s++]=t>>6&63|128,r[s++]=63&t|128):(r[s++]=t>>12|224,r[s++]=t>>6&63|128,r[s++]=63&t|128);return r}(e+=i>="a"?"\0":""),u=va(l,wa);function h(e){var t=[];return t.push("$2"),i>="a"&&t.push(i),t.push("$"),o<10&&t.push("0"),t.push(o.toString()),t.push("$"),t.push(ya(u,u.length)),t.push(ya(e,4*Ea.length-1)),t.join("")}if(void 0===n)return h(ja(c,u,o));ja(c,u,o,(function(e,t){e?n(e,null):n(null,h(t))}),s)}const $a={setRandomFallback:function(e){oa=e},genSaltSync:la,genSalt:ca,hashSync:ua,hash:ha,compareSync:function(e,t){if("string"!=typeof e||"string"!=typeof t)throw Error("Illegal arguments: "+typeof e+", "+typeof t);return 60===t.length&&da(ua(e,t.substring(0,t.length-31)),t)},compare:function(e,t,n,s){function r(n){"string"==typeof e&&"string"==typeof t?60===t.length?ha(e,t.substring(0,29),(function(e,s){e?n(e):n(null,da(s,t))}),s):fa(n.bind(this,null,!1)):fa(n.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(!n)return new Promise((function(e,t){r((function(n,s){n?t(n):e(s)}))}));if("function"!=typeof n)throw Error("Illegal callback: "+typeof n);r(n)},getRounds:function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)},getSalt:function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);if(60!==e.length)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)},truncates:function(e){if("string"!=typeof e)throw Error("Illegal arguments: "+typeof e);return ma(e)>72},encodeBase64:function(e,t){return ya(e,t)},decodeBase64:function(e,t){return va(e,t)}},Pa=Rt("https://oteebvgtsvgrkfooinrv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im90ZWVidmd0c3Zncmtmb29pbnJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwNDU1NzQsImV4cCI6MjA1ODYyMTU3NH0.IE1UReAZZk-9fbqi8SV3EF86Py703eoJVvpEBbzCBAo");const La={render:async()=>'\n    <section class="karyawan">\n  <h2>Data Karyawan</h2>\n  <div class="tabs">\n    <a href="#" class="active">Karyawan Aktif</a>\n  </div>\n  <div class="actions">\n    <button id="btn-tambah" class="btn btn-success">Tambah Data Baru</button>\n    <input type="text" id="search-karyawan" placeholder="Pencarian data karyawan" />\n  </div>\n  <table class="data-table">\n    <thead>\n      <tr>\n        <th>ID</th>\n        <th>Name</th>\n        <th>RFID Tag</th>\n        <th>Action</th>\n      </tr>\n    </thead>\n    <tbody id="karyawan-body">\n      <tr><td colspan="4">Memuat data...</td></tr>\n    </tbody>\n  </table>\n  <div class="pagination">\n    <button class="btn btn-prev" id="btn-prev">Prev</button>\n    <button class="btn btn-next" id="btn-next">Next</button>\n  </div>\n</section>\n\n\x3c!-- Form Tambah Data Karyawan --\x3e\n<div class="form-overlay" id="form-overlay">\n  <div class="form-container">\n    <h3>Tambah Data Karyawan</h3>\n    <form id="form-tambah-karyawan">\n      <label for="id">ID</label>\n      <input type="number" id="id" name="id" placeholder="Biarkan kosong untuk otomatis" min="1">\n  \n      <label for="nama">Nama</label>\n      <input type="text" id="nama" name="nama" required>\n  \n      <label for="rfid">RFID Tag</label>\n      <input type="text" id="rfid" name="rfid" readonly required>\n  \n      <div class="input-group">\n      <label for="rfid">Password</label>\n        <input type="text" id="password" readonly>\n        <button type="button" id="togglePassword">\n          <i class="fa fa-eye"></i>\n        </button>\n      </div>\n  \n      <div class="form-actions">\n        <button type="submit" class="btn btn-success">Simpan</button>\n        <button type="button" class="btn btn-cancel" id="btn-cancel">Batal</button>\n      </div>\n    </form>\n  </div>\n</div>\n\n\x3c!-- Modal Pop-Up Sukses --\x3e\n<div class="form-overlay" id="form-success" style="display: none;">\n  <div class="form-container">\n    <h3>Berhasil</h3>\n    <p id="success-message">Data berhasil diproses.</p>\n    <div class="form-actions">\n      <button class="btn btn-success" id="btn-close-success">Tutup</button>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Form Detail Karyawan --\x3e\n<div class="form-overlay" id="form-detail">\n  <div class="form-container">\n    <h3>Detail Karyawan</h3>\n    <p><strong>ID:</strong> <span id="detail-id"></span></p>\n    <p><strong>Nama:</strong> <span id="detail-nama"></span></p>\n    <p><strong>RFID Tag:</strong> <span id="detail-rfid"></span></p>\n    <p><strong>Password:</strong> <span id="detail-password"></span></p>\n    <div class="form-actions">\n      <button class="btn btn-cancel" id="btn-close-detail">Tutup</button>\n    </div>\n  </div>\n</div>\n\n  \x3c!-- Popup Konfirmasi Hapus --\x3e\n<div class="popup-overlay" id="popup-confirm-delete">\n  <div class="popup-container">\n    <p>Apakah kamu yakin ingin menghapus data karyawan ini?</p>\n    <div class="popup-actions">\n      <button class="btn btn-danger" id="btn-confirm-delete">Ya, Hapus</button>\n      <button class="btn btn-cancel" id="btn-cancel-delete">Batal</button>\n    </div>\n  </div>\n</div>\n\n\x3c!-- Popup Status --\x3e\n<div id="popup-status" class="popup-overlay">\n  <div class="popup-container">\n    <p id="popup-message">Pesan Status</p>\n    <button id="btn-close-popup" class="btn-cancel">Tutup</button>\n  </div>\n</div>\n\n\n    ',async afterRender(){let e=1,t=[];const n=(e=8)=>{const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let s=0;s<e;s++)n+=t[Math.floor(62*Math.random())];return n},s=async()=>{const{data:e,error:t}=await Pa.from("employees").select("*").order("id",{ascending:!0});return t?(console.error("Gagal mengambil semua data:",t.message),[]):e},r=e=>{const t=document.querySelector("#karyawan-body");t.innerHTML="",e&&0!==e.length?e.forEach((e=>{const n=document.createElement("tr");n.innerHTML=`\n          <td>${e.id}</td>\n          <td>${e.name}</td>\n          <td>${e.rfid_tag}</td>\n          <td>\n            <button class="action-btn detail-btn" data-id="${e.id}"><i class="fa fa-eye"></i></button>\n            <button class="action-btn delete-btn" data-id="${e.id}"><i class="fa fa-trash"></i></button>\n          </td>\n        `,t.appendChild(n)})):t.innerHTML='<tr><td colspan="4">Tidak ada data karyawan.</td></tr>'},i=async(t=1)=>{const{data:n,error:s}=await Pa.from("employees").select("*").order("id",{ascending:!0}).range(5*(t-1),5*t-1);if(s)return r([]),void(document.querySelector("#karyawan-body").innerHTML=`<tr><td colspan="4">Gagal mengambil data: ${s.message}</td></tr>`);r(n),document.getElementById("btn-prev").disabled=1===e;const{count:i}=await Pa.from("employees").select("*",{count:"exact",head:!0});document.getElementById("btn-next").disabled=5*e>=i};t=await s(),await i(e),document.getElementById("search-karyawan").addEventListener("input",(async n=>{const s=n.target.value.toLowerCase();if(""===s.trim())return void await i(e);const a=t.filter((e=>e.name.toLowerCase().includes(s)));r(a)}));let a="",o=!1;const l=document.getElementById("togglePassword"),c=document.getElementById("password");l.addEventListener("click",(()=>{o?(c.value="",l.innerHTML='<i class="fa fa-eye"></i>'):(a||(a=n(8)),c.value=a,l.innerHTML='<i class="fa fa-eye-slash"></i>'),o=!o}));let u="";document.getElementById("btn-tambah").addEventListener("click",(async()=>{a=n(8),u=$a.hashSync(a,10),c.value=a;const{data:e,error:t}=await Pa.from("rfid_tag").select("rfid_tag").eq("status","available").order("id",{ascending:!0}).limit(1).single();t?h("Gagal mengambil RFID yang tersedia: "+t.message,!1):(document.getElementById("rfid").value=e.rfid_tag,a=n(8),u=$a.hashSync(a,10),c.value=a,document.getElementById("form-overlay").classList.add("show"))})),document.getElementById("btn-cancel").addEventListener("click",(()=>{document.getElementById("form-overlay").classList.remove("show"),document.getElementById("form-tambah-karyawan").reset()}));const h=(e,t=!0)=>{const n=document.getElementById("popup-status");document.getElementById("popup-message").textContent=e,t?(n.classList.add("success"),n.classList.remove("error")):(n.classList.add("error"),n.classList.remove("success")),n.classList.add("show")};document.getElementById("btn-close-popup").addEventListener("click",(()=>{document.getElementById("popup-status").classList.remove("show")})),document.getElementById("form-tambah-karyawan").addEventListener("submit",(async n=>{n.preventDefault();const r=document.getElementById("id").value.trim(),a=document.getElementById("nama").value.trim(),o=document.getElementById("rfid").value.trim();if(!a||!o)return alert("Semua field wajib diisi.");if(r){const e=await(async e=>{const{data:t,error:n}=await Pa.from("employees").select("id").eq("id",e);return n?(console.error("Error checking ID existence: ",n.message),!1):t.length>0})(r);if(e)return void h("ID sudah ada, silakan pilih ID lain")}const l={name:a,rfid_tag:o,password:u};r&&(l.id=parseInt(r));const{data:c,error:d}=await Pa.from("employees").insert([l]);if(d){if("23505"===d.code)return void console.log("ID sudah ada, namun data berhasil dimasukkan.");h("Gagal menambahkan data karyawan: "+d.message,!1)}else await Pa.from("rfid_tag").update({status:"assigned"}).eq("rfid_tag",o),h("Data berhasil ditambahkan.",!0),document.getElementById("form-overlay").classList.remove("show"),document.getElementById("form-tambah-karyawan").reset(),t=await s(),await i(e)})),document.getElementById("btn-next").addEventListener("click",(async()=>{e++,await i(e)})),document.getElementById("btn-prev").addEventListener("click",(async()=>{e--,await i(e)})),document.getElementById("karyawan-body").addEventListener("click",(async n=>{if(n.target.closest(".detail-btn")){const e=n.target.closest(".detail-btn").dataset.id,{data:t,error:s}=await Pa.from("employees").select("id, name, rfid_tag, password").eq("id",e).single();if(s)return void alert("Gagal mengambil detail: "+s.message);document.getElementById("detail-id").textContent=t.id,document.getElementById("detail-nama").textContent=t.name,document.getElementById("detail-rfid").textContent=t.rfid_tag,document.getElementById("detail-password").textContent=t.password||"(tidak tersedia)",document.getElementById("form-detail").classList.add("show")}document.getElementById("karyawan-body").addEventListener("click",(async n=>{if(n.target.closest(".delete-btn")){const r=n.target.closest(".delete-btn").dataset.id,a=document.getElementById("popup-confirm-delete");a.classList.add("show"),document.getElementById("btn-confirm-delete").addEventListener("click",(async()=>{const{error:n}=await Pa.from("employees").delete().eq("id",r);if(n)return alert("Gagal menghapus data karyawan: "+n.message),void a.classList.remove("show");h("Data berhasil dihapus.",!0),a.classList.remove("show"),t=await s(),await i(e)})),document.getElementById("btn-cancel-delete").addEventListener("click",(()=>{a.classList.remove("show")}))}})),document.getElementById("btn-close-detail").addEventListener("click",(()=>{document.getElementById("form-detail").classList.remove("show")}))}))}},Aa=La,Da=Rt("https://oteebvgtsvgrkfooinrv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im90ZWVidmd0c3Zncmtmb29pbnJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwNDU1NzQsImV4cCI6MjA1ODYyMTU3NH0.IE1UReAZZk-9fbqi8SV3EF86Py703eoJVvpEBbzCBAo"),Na={render:async()=>'\n      <section class="absensi">\n        <h2>Data Absensi</h2>\n        <div class="tabs">\n          <a href="#" class="active">Absensi Karyawan</a>\n        </div>\n        <div class="actions">\n          <button id="btn-tambah-absensi" class="btn btn-success">Tambah Absensi</button>\n         <div class="filter-group">\n  <label for="filter-date">Filter Tanggal:</label>\n  <input type="date" id="filter-date" name="filter-date">\n</div>\n\n        </div>\n        <table class="data-table">\n          <thead>\n            <tr>\n              <th>Employee ID</th>\n              <th>Date</th>\n              <th>Check In</th>\n              <th>Check Out</th>\n              <th>Status</th>\n              <th>Aksi</th>\n            </tr>\n          </thead>\n          <tbody id="absensi-body">\n            <tr><td colspan="6">Memuat data...</td></tr>\n          </tbody>\n        </table>\n        <div class="pagination">\n          <button class="btn btn-prev" id="btn-prev-absensi">Prev</button>\n          <button class="btn btn-next" id="btn-next-absensi">Next</button>\n        </div>\n      </section>\n\n      <div class="form-overlay" id="form-overlay-absensi">\n        <div class="form-container">\n          <h3>Tambah Absensi</h3>\n          <form id="form-tambah-absensi">\n            <label for="employee_id">Employee ID</label>\n            <input type="number" id="employee_id" name="employee_id" min="1" required>\n            <label for="date">Tanggal</label>\n            <input type="date" id="date" name="date" required>\n            <label for="check_in">Check In</label>\n            <input type="time" id="check_in" name="check_in" step="1">\n            <label for="check_out">Check Out</label>\n            <input type="time" id="check_out" name="check_out" step="1">\n            <select id="status" required>\n              <option value="">-- Pilih Status --</option>\n              <option value="Hadir">Hadir</option>\n              <option value="Tidak Hadir">Tidak Hadir</option>\n              <option value="Terlambat">Terlambat</option>\n            </select>\n            <div class="form-actions">\n              <button type="submit" class="btn btn-success">Simpan</button>\n              <button type="button" class="btn btn-cancel" id="btn-cancel-absensi">Batal</button>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      <div class="modal-overlay" id="modal-detail">\n        <div class="modal-container">\n          <h3>Detail Absensi</h3>\n          <p><strong>Employee ID:</strong> <span id="modal-employee-id"></span></p>\n          <p><strong>Name:</strong> <span id="modal-name"></span></p>\n          <p><strong>Date:</strong> <span id="modal-date"></span></p>\n          <p><strong>Check In:</strong> <span id="modal-check-in"></span></p>\n          <p><strong>Check Out:</strong> <span id="modal-check-out"></span></p>\n          <p><strong>Status:</strong> <span id="modal-status"></span></p>\n          <button class="btn btn-cancel" id="btn-close-modal">Tutup</button>\n        </div>\n      </div>\n\n     <div id="overlay-edit-checkout" class="overlay">\n  <div class="overlay-content">\n    <h3>Edit Data Absensi</h3>\n    <form id="form-edit-checkout">\n      <input type="hidden" id="edit-id">\n\n      <div class="form-group">\n        <label><strong>Employee ID:</strong></label>\n        <span id="display-employee-id"></span>\n      </div>\n      \n      <div class="form-group">\n        <label><strong>Name:</strong></label>\n        <span id="display-employee-name"></span>\n      </div>\n      \n      <div class="form-group">\n        <label><strong>Date:</strong></label>\n        <span id="display-date"></span>\n      </div>\n\n      <div class="form-group">\n        <label for="edit-checkin-time">Check In:</label>\n        <input type="time" id="edit-checkin-time" step="1" required>\n      </div>\n\n      <div class="form-group">\n        <label for="edit-checkout-time">Check Out:</label>\n        <input type="time" id="edit-checkout-time" step="1" required>\n      </div>\n\n      <div class="form-group">\n        <label for="edit-status">Status:</label>\n        <select id="edit-status" required>\n          <option value="Hadir">Hadir</option>\n          <option value="Tidak Hadir">Tidak Hadir</option>\n          <option value="Terlambat">Terlambat</option>\n        </select>\n      </div>\n\n      <div class="btn-group">\n        <button type="submit" class="btn btn-success">Simpan</button>\n        <button type="button" id="btn-cancel-edit" class="btn btn-cancel">Batal</button>\n      </div>\n    </form>\n  </div>\n</div>\n\n      \x3c!-- Popup Notification --\x3e\n      <div class="popup-overlay" id="popup-absensi">\n        <div class="popup-container">\n          <p id="popup-message"></p>\n          <button class="btn btn-close-popup" id="btn-close-popup">Tutup</button>\n        </div>\n      </div>\n\n      \x3c!-- Popup Konfirmasi Hapus --\x3e\n<div class="popup-overlay" id="popup-confirm-delete">\n  <div class="popup-container">\n    <p>Apakah kamu yakin ingin menghapus data absensi ini?</p>\n    <div class="popup-actions">\n      <button class="btn btn-danger" id="btn-confirm-delete">Ya, Hapus</button>\n      <button class="btn btn-cancel" id="btn-cancel-delete">Batal</button>\n    </div>\n  </div>\n</div>\n\n    ',async afterRender(){let e=1,t=null;const n=async(t=1,n=null)=>{let s=Da.from("attendance").select("*").order("date",{ascending:!1}).range(5*(t-1),5*t-1);n&&(s=s.eq("date",n));const{data:r,error:i}=await s,a=document.getElementById("absensi-body");if(a.innerHTML="",i)return void(a.innerHTML=`<tr><td colspan="6">Gagal mengambil data: ${i.message}</td></tr>`);if(!r||0===r.length)return void(a.innerHTML='<tr><td colspan="6">Tidak ada data absensi.</td></tr>');r.forEach((e=>{const t=document.createElement("tr");t.innerHTML=`\n          <td>${e.employee_id}</td>\n          <td>${e.date}</td>\n          <td>${e.check_in?e.check_in.slice(11,19):"-"}</td>\n          <td>${e.check_out?e.check_out.slice(11,19):"-"}</td>\n          <td>${e.status}</td>\n          <td>\n            <button class="action-btn detail-btn" data-id="${e.id}"><i class="fa fa-eye"></i></button>\n            <button class="action-btn edit-btn" data-id="${e.id}"><i class="fa fa-edit"></i></button>\n            <button class="action-btn delete-btn" data-id="${e.id}"><i class="fa fa-trash"></i></button>\n          </td>\n        `,a.appendChild(t)})),document.getElementById("btn-prev-absensi").disabled=1===e;const{count:o}=await Da.from("attendance").select("*",{count:"exact"});document.getElementById("btn-next-absensi").disabled=5*e>=o};await n(e),document.getElementById("form-edit-checkout").addEventListener("submit",(async t=>{t.preventDefault();const s=document.getElementById("edit-id").value,r=document.getElementById("edit-checkin-time").value,i=document.getElementById("edit-checkout-time").value,a=document.getElementById("edit-status").value,o=document.getElementById("display-date").textContent,l=r?`${o}T${r}`:null,c=i?`${o}T${i}`:null,{error:u}=await Da.from("attendance").update({check_in:l,check_out:c,status:a}).eq("id",s);u?Na.showPopup("Gagal mengupdate data: "+u.message,"error"):(Na.showPopup("Data berhasil diupdate.","success"),document.getElementById("overlay-edit-checkout").classList.remove("show"),await n(e))})),document.getElementById("btn-tambah-absensi").addEventListener("click",(()=>{document.getElementById("form-overlay-absensi").classList.add("show")})),document.getElementById("btn-cancel-absensi").addEventListener("click",(()=>{document.getElementById("form-overlay-absensi").classList.remove("show"),document.getElementById("form-tambah-absensi").reset()})),document.getElementById("btn-cancel-edit").addEventListener("click",(()=>{document.getElementById("overlay-edit-checkout").classList.remove("show")})),document.getElementById("form-tambah-absensi").addEventListener("submit",(async t=>{t.preventDefault();const s=Number(document.getElementById("employee_id").value),r=document.getElementById("date").value,i=document.getElementById("check_in").value,a=document.getElementById("check_out").value,o=document.getElementById("status").value;if(!s||!r||!o)return Na.showPopup("Harap isi Employee ID, Tanggal, dan Status.","error");if(s<1)return Na.showPopup("Employee ID tidak boleh kurang dari 1.","error");if("Hadir"===o&&!i)return Na.showPopup("Check In wajib diisi untuk status Hadir.","error");const{data:l,error:c}=await Da.from("employees").select("id").eq("id",s).single();if(c||!l)return Na.showPopup("ID karyawan tidak ditemukan. Mohon periksa kembali.","error");let u=i?`${r}T${i}:00`:null,h=a?`${r}T${a}:00`:null;"Tidak Hadir"===o&&(u=null,h=null);const{error:d}=await Da.from("attendance").upsert([{employee_id:s,date:r,check_in:u,check_out:h,status:o}],{onConflict:["employee_id","date"]});d?Na.showPopup("Gagal menambahkan absensi: "+d.message,"error"):(Na.showPopup("Absensi berhasil ditambahkan.","success"),document.getElementById("form-overlay-absensi").classList.remove("show"),document.getElementById("form-tambah-absensi").reset(),await n(e))})),document.getElementById("btn-next-absensi").addEventListener("click",(()=>{e++,n(e)})),document.getElementById("btn-prev-absensi").addEventListener("click",(()=>{e--,n(e)})),document.getElementById("filter-date").addEventListener("change",(async t=>{const s=t.target.value;e=1,await n(e,s)})),document.addEventListener("click",(async s=>{if(s.target.closest(".detail-btn")){const e=s.target.closest("button").dataset.id,{data:t,error:n}=await Da.from("attendance").select("*").eq("id",e).single();if(n)return void Na.showPopup("Gagal mengambil data detail: "+n.message,"error");const{data:r,error:i}=await Da.from("employees").select("name").eq("id",t.employee_id).single();if(i)return void Na.showPopup("Gagal mengambil nama karyawan: "+i.message,"error");document.getElementById("modal-employee-id").textContent=t.employee_id,document.getElementById("modal-name").textContent=r.name||"Tidak ditemukan",document.getElementById("modal-date").textContent=t.date,document.getElementById("modal-check-in").textContent=t.check_in?t.check_in.slice(11,19):"-",document.getElementById("modal-check-out").textContent=t.check_out?t.check_out.slice(11,19):"-",document.getElementById("modal-status").textContent=t.status,document.getElementById("modal-detail").classList.add("show")}if(s.target.closest(".edit-btn")){const e=s.target.closest("button").dataset.id;await(async e=>{const{data:t,error:n}=await Da.from("attendance").select("id, date, check_in, check_out, status, employee_id").eq("id",e).single();if(n||!t)return void Na.showPopup("Gagal mengambil data absensi.","error");const{data:s,error:r}=await Da.from("employees").select("name").eq("id",t.employee_id).single();r&&Na.showPopup("Gagal mengambil data karyawan.","error"),document.getElementById("edit-id").value=t.id,document.getElementById("display-employee-id").textContent=t.employee_id,document.getElementById("display-employee-name").textContent=s?.name||"Tidak ditemukan",document.getElementById("display-date").textContent=t.date;const i=t.check_in?t.check_in.split("T")[1].slice(0,8):"",a=t.check_out?t.check_out.split("T")[1].slice(0,8):"";document.getElementById("edit-checkin-time").value=i,document.getElementById("edit-checkout-time").value=a,document.getElementById("edit-status").value=t.status,document.getElementById("overlay-edit-checkout").classList.add("show")})(e)}if(s.target.closest(".delete-btn")&&(t=s.target.closest("button").dataset.id,document.getElementById("popup-confirm-delete").classList.add("show")),s.target.closest("#btn-close-modal")&&document.getElementById("modal-detail").classList.remove("show"),s.target.closest("#btn-confirm-delete")&&t){const{error:s}=await Da.from("attendance").delete().eq("id",t);s?Na.showPopup("Gagal menghapus data: "+s.message,"error"):(Na.showPopup("Data absensi berhasil dihapus.","success"),await n(e)),t=null,document.getElementById("popup-confirm-delete").classList.remove("show")}s.target.closest("#btn-cancel-delete")&&(t=null,document.getElementById("popup-confirm-delete").classList.remove("show"))}))},showPopup(e,t="success"){const n=document.getElementById("popup-absensi"),s=document.getElementById("popup-message"),r=document.getElementById("btn-close-popup");n.classList.add("show"),s.textContent=e,n.classList.remove("success","error"),n.classList.add("error"===t?"error":"success"),r.addEventListener("click",(()=>{n.classList.remove("show")})),setTimeout((()=>{n.classList.remove("show")}),3e3)}},Ma=Na,Ra=Rt("https://oteebvgtsvgrkfooinrv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im90ZWVidmd0c3Zncmtmb29pbnJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMwNDU1NzQsImV4cCI6MjA1ODYyMTU3NH0.IE1UReAZZk-9fbqi8SV3EF86Py703eoJVvpEBbzCBAo"),Ua={"/":sa,"/login":sa,"/dashboard":ia,"/karyawan":Aa,"/absensi":Ma,"/account":{render:async()=>'\n      <section class="account">\n        <h2>Data Akun Admin</h2>\n        <form id="form-account">\n          <label for="username">Username</label>\n          <input type="text" id="username" name="username" disabled>\n\n          <label for="role">Peran</label>\n          <input type="text" id="role" name="role" value="Administrator" disabled>\n\n          <label for="last-login">Terakhir Login</label>\n          <input type="text" id="last-login" name="last-login" disabled>\n\n        \n        </form>\n      </section>\n    ',async afterRender(){const e="true"===localStorage.getItem("isloggedin")||"true"===localStorage.getItem("isLoggedIn"),t=localStorage.getItem("loggedInUser")||localStorage.getItem("username");if(!e||!t)return alert("Anda belum login! Silakan login terlebih dahulu."),void(window.location.href="/#/login");const{data:n,error:s}=await Ra.from("admin").select("id, username, last_login").eq("username",t).single();if(s||!n)return void alert("Gagal mengambil data admin: "+(s?.message||"Data tidak ditemukan"));const r=n.id;document.getElementById("username").value=n.username,n.last_login?document.getElementById("last-login").value=ea.fromISO(n.last_login).setZone("Asia/Jakarta").toLocaleString(ea.DATETIME_MED):document.getElementById("last-login").value="-",document.getElementById("form-account").addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("username").value.trim();if(!t)return void alert("Username tidak boleh kosong.");const{error:n}=await Ra.from("admin").update({username:t}).eq("id",r);n?alert("Gagal menyimpan data: "+n.message):(alert("Data berhasil diperbarui."),localStorage.setItem("username",t),localStorage.setItem("loggedInUser",t))}))}}};const Ba=async()=>{if("serviceWorker"in navigator)try{await navigator.serviceWorker.register("./sw.bundle.js"),console.log("Service worker registered")}catch(e){console.log("Failed to register service worker",e)}else console.log("Service Worker not supported in the browser")},Fa=new class{constructor({content:e}){this._content=e,this._initialAppShell()}async _initialAppShell(){window.addEventListener("hashchange",(()=>this.renderPage())),window.addEventListener("load",(()=>this.renderPage()))}_updateNavigation(e=""){const t="true"===localStorage.getItem("isLoggedIn"),n=document.querySelector("#navigationDrawer");n&&("/login"!==e?t&&(n.innerHTML='\n        <ul class="nav flex-column">\n          <li class="nav-item">\n            <a href="#/dashboard" class="nav-link active">\n              <i class="bi bi-grid-fill"></i> Dashboard\n            </a>\n          </li>\n          <p class="nav-section">DATA ABSENSI</p>\n          <li class="nav-item">\n            <a href="#/karyawan" class="nav-link">\n              <i class="bi bi-person-badge"></i> Karyawan\n            </a>\n          </li>\n          <li class="nav-item">\n            <a href="#/absensi" class="nav-link">\n              <i class="bi bi-calendar-event"></i> Absensi\n            </a>\n          </li>\n          <li class="nav-item">\n          <a href="#/rfid" class="nav-link">\n            <i class="bi bi-credit-card"></i> RFID\n          </a>\n        </li>\n          <p class="nav-section">PENGATURAN</p>\n          <li class="nav-item">\n            <a href="#/account" class="nav-link">\n              <i class="bi bi-person-gear"></i> Akun\n            </a>\n          </li>\n          <li class="nav-item">\n            <a href="#/" id="logout-link" class="nav-link">\n              <i class="bi bi-box-arrow-right"></i> Logout\n            </a>\n          </li>\n        </ul>\n      ',setTimeout((()=>{const e=document.querySelector("#logout-link");e?.addEventListener("click",(e=>{e.preventDefault(),localStorage.clear(),window.location.hash="/login"}))}),0)):n.innerHTML="")}async renderPage(){const t=e.parseActiveUrlWithCombiner(),n="true"===localStorage.getItem("isLoggedIn"),s=document.getElementById("navigationDrawer"),r=document.getElementById("appWrapper");if(!n&&"/login"!==t)return void(window.location.hash="/login");if(n&&"/login"===t)return void(window.location.hash="/dashboard");const i=Ua[t]||Ua["/404"];this._content.innerHTML=await i.render(),await i.afterRender(),s&&r&&("/login"===t?(s.style.display="none",r.classList.remove("d-flex")):(s.style.display="block",r.classList.add("d-flex"))),this._updateNavigation(t)}}({drawer:document.querySelector("#navigationDrawer"),content:document.querySelector("#mainContent")});window.addEventListener("hashchange",(()=>{Fa.renderPage()})),window.addEventListener("load",(()=>{Fa.renderPage(),Ba()})),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((e=>{e.forEach((e=>e.unregister()))}))})()})();